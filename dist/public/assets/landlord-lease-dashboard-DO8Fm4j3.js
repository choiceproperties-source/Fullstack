import{r as v,j as e}from"./ui-DbSH5uIw.js";import{u as f,z as p,y as N,N as o,K as m,C as l,O as x,o as b,q as A,n as y,U as S,Y as w,c as i}from"./index-C3yA2dmm.js";import{u as _}from"./query-C11-Me4M.js";import{T as L}from"./timeline-dBNn61u8.js";import"./vendor-15WF5uYg.js";import"./charts-DfbWf95P.js";function F(){const{user:n,isLoggedIn:r}=f(),[,u]=p();v.useEffect(()=>{N({title:"Lease Pipeline Dashboard - Choice Properties",description:"Manage lease status, signatures, and move-in tracking for your properties.",url:"https://choiceproperties.com/landlord-lease-dashboard"})},[]);const{data:a,isLoading:g}=_({queryKey:["/api/landlord/applications/leases"],enabled:r&&(n?.role==="landlord"||n?.role==="property_manager"||n?.role==="admin")});if(!r||n?.role!=="landlord"&&n?.role!=="property_manager"&&n?.role!=="admin")return u("/login"),null;const h=s=>[{id:"lease_sent",label:"Lease Sent",description:s.leaseSentAt?"Lease delivered to tenant":"Not sent yet",date:s.leaseSentAt?new Date(s.leaseSentAt):null,status:s.leaseSentAt?"completed":"pending"},{id:"lease_accepted",label:"Tenant Accepted",description:s.leaseAcceptedAt?"Tenant reviewed and accepted":"Awaiting tenant acceptance",date:s.leaseAcceptedAt?new Date(s.leaseAcceptedAt):null,status:s.leaseAcceptedAt?"completed":s.leaseSentAt?"current":"pending"},{id:"lease_signed",label:"Both Signed",description:s.leaseSignedAt?"Lease fully executed":"Awaiting signatures",date:s.leaseSignedAt?new Date(s.leaseSignedAt):null,status:s.leaseSignedAt?"completed":s.leaseAcceptedAt?"current":"pending"},{id:"move_in_ready",label:"Move-In Scheduled",description:s.moveInDate?`Move-in: ${new Date(s.moveInDate).toLocaleDateString()}`:"Not scheduled",date:s.moveInDate?new Date(s.moveInDate):null,status:s.moveInDate?"completed":"pending"}],d={sent:a?.filter(s=>s.leaseSentAt&&!s.leaseAcceptedAt).length||0,accepted:a?.filter(s=>s.leaseAcceptedAt&&!s.leaseSignedAt).length||0,signed:a?.filter(s=>s.leaseSignedAt&&!s.moveInDate).length||0,moveInReady:a?.filter(s=>s.moveInDate).length||0};return g?e.jsxs(e.Fragment,{children:[e.jsx(o,{}),e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading lease pipeline..."})}),e.jsx(m,{})]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{}),e.jsx("main",{className:"min-h-screen bg-background py-12",children:e.jsxs("div",{className:"container max-w-6xl mx-auto px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Lease Pipeline"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor lease status, signatures, and move-in preparation"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs(l,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:d.sent}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Lease Sent"})]}),e.jsxs(l,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:d.accepted}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Awaiting Signature"})]}),e.jsxs(l,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:d.signed}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Fully Signed"})]}),e.jsxs(l,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:d.moveInReady}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Move-In Ready"})]})]}),!a||a.length===0?e.jsxs(l,{className:"p-8 text-center",children:[e.jsx(x,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"No Active Leases"}),e.jsx("p",{className:"text-muted-foreground",children:"You don't have any active leases yet."})]}):e.jsx("div",{className:"space-y-6",children:["lease_sent","lease_accepted","lease_signed","move_in_ready"].map(s=>{const c=a.filter(t=>t.leaseStatus===s);if(c.length===0)return null;const j={lease_sent:"Lease Sent - Awaiting Review",lease_accepted:"Tenant Accepted - Awaiting Signatures",lease_signed:"Fully Signed - Ready for Move-In",move_in_ready:"Move-In Scheduled"}[s];return e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[s==="lease_sent"&&e.jsx(b,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),s==="lease_accepted"&&e.jsx(A,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"}),(s==="lease_signed"||s==="move_in_ready")&&e.jsx(y,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),j]}),e.jsx("div",{className:"space-y-4",children:c.map(t=>e.jsxs(l,{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold",children:t.property.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.property.address})]})}),e.jsxs("div",{className:"flex items-center gap-2 mb-4 p-3 bg-muted rounded",children:[e.jsx(S,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:t.user.fullName}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.user.email})]})]}),e.jsx("div",{className:"py-4 border-y mb-4",children:e.jsx(L,{steps:h(t)})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{href:`/application-review/${t.id}`,children:e.jsxs(i,{variant:"default",size:"sm",className:"gap-2",children:[e.jsx(x,{className:"w-4 h-4"}),"View Details"]})}),!t.leaseSentAt&&e.jsx(i,{variant:"outline",size:"sm",children:"Send Lease"}),t.leaseSignedAt&&!t.moveInDate&&e.jsx(i,{variant:"outline",size:"sm",children:"Prepare Move-In"})]})]},t.id))})]},s)})})]})}),e.jsx(m,{})]})}export{F as default};
