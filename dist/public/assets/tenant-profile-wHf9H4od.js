import{r as u,j as e}from"./ui-DbSH5uIw.js";import{y as C,u as P,z as M,a as L,N as _,C as h,ay as A,az as E,aA as T,M as g,P as b,c as n,ar as k,p as I,I as p,Q as U,L as z,K as D}from"./index-C3yA2dmm.js";import{F as O,a as r,b as i,c as o,d as c,e as d}from"./form-Dx3lF8C4.js";import{u as Y}from"./forms-DE5E1-IR.js";import{t as B,o as R,s as m}from"./types-CF7YDNpg.js";import"./vendor-15WF5uYg.js";import"./query-C11-Me4M.js";import"./charts-DfbWf95P.js";const J=R({fullName:m().min(2,"Full name must be at least 2 characters"),email:m().email("Invalid email address"),phone:m().optional(),bio:m().max(500,"Bio must be less than 500 characters").optional()});function ee(){u.useEffect(()=>{C({title:"My Profile - Choice Properties",description:"Manage your profile and account settings on Choice Properties.",image:"https://choiceproperties.com/og-image.png",url:"https://choiceproperties.com/tenant-profile"})},[]);const{user:s,logout:N,isLoggedIn:v}=P(),[,f]=M(),{toast:x}=L(),[K,Q]=u.useState(!1),[l,j]=u.useState(!1),a=Y({resolver:B(J),defaultValues:{fullName:s?.full_name||"",email:s?.email||"",phone:s?.phone||"",bio:s?.bio||""}});if(!v||!s)return f("/login"),null;const y=async t=>{j(!0);try{x({title:"Profile Updated",description:"Your profile has been successfully updated."})}catch(F){x({title:"Error",description:F.message||"Failed to update profile",variant:"destructive"})}finally{j(!1)}},w=()=>{N(),f("/"),x({title:"Signed Out",description:"You have been successfully signed out."})},S=s?.full_name?s.full_name.split(" ").map(t=>t[0]).join("").toUpperCase():s?.email?.[0]?.toUpperCase()||"?";return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(_,{}),e.jsx("div",{className:"bg-gradient-to-br from-blue-600 via-blue-500 to-indigo-600 text-white py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-2",children:"My Profile"}),e.jsx("p",{className:"text-blue-100 text-lg",children:"Manage your account settings and personal information"})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-12 flex-1 max-w-2xl",children:[e.jsx(h,{className:"p-8 mb-8 border-t-4 border-t-primary",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-6 pb-8 border-b",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs(A,{className:"h-24 w-24 border-2 border-primary",children:[s?.profile_image&&e.jsx(E,{src:s.profile_image,alt:s.full_name||"User"}),e.jsx(T,{className:"text-lg font-bold",children:S})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:s?.full_name||"Tenant User"}),e.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s?.email})]}),s?.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{children:s.phone})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Member since ",s?.created_at?new Date(s.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Recently"]})]})]}),e.jsx("div",{className:"flex gap-2 flex-shrink-0 w-full md:w-auto",children:e.jsxs(n,{onClick:w,variant:"outline",className:"flex-1 md:flex-none","data-testid":"button-logout",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Sign Out"]})})]})}),e.jsxs(h,{className:"p-8",children:[e.jsx("h3",{className:"text-xl font-bold text-foreground mb-6",children:"Edit Profile"}),e.jsx(O,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(y),className:"space-y-6",children:[e.jsx(r,{control:a.control,name:"fullName",render:({field:t})=>e.jsxs(i,{children:[e.jsxs(o,{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"})," Full Name"]}),e.jsx(c,{children:e.jsx(p,{type:"text",placeholder:"John Doe",disabled:l,"data-testid":"input-fullname",...t})}),e.jsx(d,{})]})}),e.jsx(r,{control:a.control,name:"email",render:({field:t})=>e.jsxs(i,{children:[e.jsxs(o,{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4"})," Email"]}),e.jsx(c,{children:e.jsx(p,{type:"email",placeholder:"you@example.com",disabled:!0,"data-testid":"input-email",...t})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Email cannot be changed"}),e.jsx(d,{})]})}),e.jsx(r,{control:a.control,name:"phone",render:({field:t})=>e.jsxs(i,{children:[e.jsxs(o,{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"})," Phone Number"]}),e.jsx(c,{children:e.jsx(p,{type:"tel",placeholder:"+1 (555) 123-4567",disabled:l,"data-testid":"input-phone",...t})}),e.jsx(d,{})]})}),e.jsx(r,{control:a.control,name:"bio",render:({field:t})=>e.jsxs(i,{children:[e.jsx(o,{className:"font-semibold text-sm",children:"About You"}),e.jsx(c,{children:e.jsx(U,{placeholder:"Tell us about yourself...",disabled:l,"data-testid":"textarea-bio",className:"resize-none",rows:4,...t})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t.value?.length||0,"/500 characters"]}),e.jsx(d,{})]})}),e.jsx(n,{type:"submit",disabled:l,className:"w-full","data-testid":"button-save-profile",children:l?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})]})})]}),e.jsxs(h,{className:"p-8 mt-8",children:[e.jsx("h3",{className:"text-xl font-bold text-foreground mb-4",children:"Account Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:"Password"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Change your password"})]}),e.jsx(n,{variant:"outline",size:"sm",disabled:!0,"data-testid":"button-change-password",children:"Coming Soon"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your notification preferences"})]}),e.jsx(n,{variant:"outline",size:"sm",disabled:!0,"data-testid":"button-notifications",children:"Coming Soon"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Permanently delete your account"})]}),e.jsx(n,{variant:"destructive",size:"sm",disabled:!0,"data-testid":"button-delete-account",children:"Coming Soon"})]})]})]})]}),e.jsx(D,{})]})}export{ee as default};
