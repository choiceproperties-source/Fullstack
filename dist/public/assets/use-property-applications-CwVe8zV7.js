import{c as A,u as g,a as c}from"./query-C11-Me4M.js";import{u as w,a as f,r as u,_ as h}from"./index-C3yA2dmm.js";function F(){const{user:e}=w(),{toast:a}=f(),p=A(),{data:n,isLoading:l,error:d,refetch:i}=g({queryKey:["/api/applications/owner"],queryFn:async()=>{const t=await h(),s=await fetch("/api/applications/owner",{headers:t?{Authorization:`Bearer ${t}`}:{},credentials:"include"});if(!s.ok)throw new Error("Failed to fetch applications");return s.json()},enabled:!!e&&(e.role==="owner"||e.role==="agent"||e.role==="admin")}),y=n?.success?n.data:[],o=c({mutationFn:async({applicationId:t,status:s,options:m})=>u("PATCH",`/api/v2/applications/${t}/status`,{status:s,...m}),onSuccess:()=>{a({title:"Application status updated"}),p.invalidateQueries({queryKey:["/api/applications/owner"]}),i()},onError:t=>{a({title:"Failed to update status",description:t.message,variant:"destructive"})}}),r=c({mutationFn:async t=>u("POST",`/api/applications/${t}/score`),onSuccess:()=>{a({title:"Application scored successfully"}),i()},onError:t=>{a({title:"Failed to score application",description:t.message,variant:"destructive"})}});return{applications:y,isLoading:l,error:d,refetch:i,updateStatus:o.mutate,isUpdatingStatus:o.isPending,scoreApplication:r.mutate,isScoringApplication:r.isPending}}export{F as u};
