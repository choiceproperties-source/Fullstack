import{r as l,j as e}from"./ui-DbSH5uIw.js";import{a as w,y as N,u as v,z as k,N as S,C,w as F,M as E,I as h,v as L,Y as i,E as M,c as P,a9 as I,K as T}from"./index-C3yA2dmm.js";import{C as B}from"./checkbox-DOjwYwUo.js";import{u as R}from"./forms-DE5E1-IR.js";import{t as W,b as Y}from"./types-CF7YDNpg.js";import{l as z}from"./schema-CGOlytRX.js";import{F as A,a as c,b as d,c as m,d as x,e as f}from"./form-Dx3lF8C4.js";import{m as p}from"./proxy-BJuH2pIT.js";import{E as D}from"./eye-off-Bubmbnfp.js";import"./vendor-15WF5uYg.js";import"./query-C11-Me4M.js";import"./charts-DfbWf95P.js";function $(){const{toast:g}=w();l.useEffect(()=>{N({title:"Login - Choice Properties",description:"Sign in to your Choice Properties account to manage your properties, applications, and saved listings.",image:"https://choiceproperties.com/og-image.png",url:"https://choiceproperties.com/login"})},[]);const{login:j}=v(),[,t]=k(),[r,u]=l.useState(!1),[o,b]=l.useState(!1),a=R({resolver:W(z.extend({rememberMe:Y().optional()})),defaultValues:{email:"",password:"",rememberMe:!1}}),y=async s=>{u(!0);try{const n=await j(s.email,s.password,s.rememberMe);switch(g({title:"Welcome back!",description:"You have successfully signed in."}),n){case"admin":t("/admin");break;case"agent":t("/agent-dashboard");break;case"landlord":case"property_manager":t("/landlord-dashboard");break;case"renter":default:t("/renter-dashboard");break}}catch(n){a.setError("root",{message:n.message||"Login failed"})}finally{u(!1)}};return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(S,{}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 bg-gradient-to-br from-primary/5 via-background to-secondary/5",children:e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"w-full max-w-md",children:[e.jsxs(C,{className:"w-full p-8 shadow-xl border-t-4 border-t-primary",children:[e.jsx("div",{className:"text-center mb-6",children:e.jsxs(p.div,{initial:{scale:.9},animate:{scale:1},transition:{duration:.3,delay:.1},children:[e.jsx("div",{className:"w-14 h-14 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(F,{className:"h-7 w-7 text-primary"})}),e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-1",children:"Welcome Back"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Sign in to continue to your account"})]})}),e.jsx(A,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(y),className:"space-y-4",children:[e.jsx(c,{control:a.control,name:"email",render:({field:s})=>e.jsxs(d,{children:[e.jsxs(m,{className:"font-medium text-sm flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground"})," Email"]}),e.jsx(x,{children:e.jsx(h,{type:"email",placeholder:"you@example.com",disabled:r,autoComplete:"email","data-testid":"input-email",className:"h-11",...s})}),e.jsx(f,{})]})}),e.jsx(c,{control:a.control,name:"password",render:({field:s})=>e.jsxs(d,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(m,{className:"font-medium text-sm flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4 text-muted-foreground"})," Password"]}),e.jsx(i,{href:"/forgot-password",children:e.jsx("span",{className:"text-xs text-primary hover:underline cursor-pointer","data-testid":"link-forgot-password",children:"Forgot password?"})})]}),e.jsx(x,{children:e.jsxs("div",{className:"relative",children:[e.jsx(h,{type:o?"text":"password",placeholder:"Enter your password",disabled:r,autoComplete:"current-password","data-testid":"input-password",className:"h-11 pr-10",...s}),e.jsx("button",{type:"button",onClick:()=>b(!o),disabled:r,className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors","data-testid":"button-toggle-password","aria-label":o?"Hide password":"Show password",children:o?e.jsx(D,{className:"h-4 w-4"}):e.jsx(M,{className:"h-4 w-4"})})]})}),e.jsx(f,{})]})}),e.jsx(c,{control:a.control,name:"rememberMe",render:({field:s})=>e.jsxs(d,{className:"flex items-center gap-2 space-y-0",children:[e.jsx(x,{children:e.jsx(B,{checked:s.value,onCheckedChange:s.onChange,disabled:r,"data-testid":"checkbox-remember"})}),e.jsx(m,{className:"text-sm font-normal text-muted-foreground cursor-pointer",children:"Remember me for 30 days"})]})}),a.formState.errors.root&&e.jsx(p.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-600 text-sm bg-red-50 dark:bg-red-950/50 p-3 rounded-md flex items-start gap-2","data-testid":"text-error",children:e.jsx("span",{children:a.formState.errors.root.message})}),e.jsx(P,{type:"submit",className:"w-full h-11",disabled:r,"data-testid":"button-submit",children:r?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 animate-pulse"})," Signing In..."]}):"Sign In"})]})}),e.jsxs("p",{className:"text-center text-sm text-muted-foreground mt-6",children:["Don't have an account?"," ",e.jsx(i,{href:"/signup",children:e.jsx("span",{className:"text-primary font-semibold cursor-pointer hover:underline","data-testid":"link-signup",children:"Sign up for free"})})]})]}),e.jsxs("p",{className:"text-center text-xs text-muted-foreground mt-4",children:["By signing in, you agree to our"," ",e.jsx(i,{href:"/terms",children:e.jsx("span",{className:"hover:underline cursor-pointer",children:"Terms"})})," ","and"," ",e.jsx(i,{href:"/privacy",children:e.jsx("span",{className:"hover:underline cursor-pointer",children:"Privacy Policy"})})]})]})}),e.jsx(T,{})]})}export{$ as default};
