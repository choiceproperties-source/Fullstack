import{r as f,j as e}from"./ui-DbSH5uIw.js";import{u as Be,a as ke,U as ue,B as Ce,D as $e,b as es,c as h,d as qe,e as Me,f as Ve,I as m,S as je,g as fe,h as ge,i as ye,j as B,k as ss,L as se,C as k,l as S,m as rs,n as z,o as be,p as ts,M as as,P as ns,T as He,q as ee,r as he,s as Ne,t as oe,v as ce,w as re,E as Pe,x as is,y as ls,z as os,N as De,A as Te,F as A,G as E,H as O,J as cs,K as Fe,O as Ie,Q as Z,R as M,V as Y,W as ne,X as ds,Y as Re,Z as ms,_ as xs}from"./index-C3yA2dmm.js";import{C as ie}from"./checkbox-DOjwYwUo.js";import{u as Ue}from"./forms-DE5E1-IR.js";import{t as Ye,o as _e,s as c,b as le}from"./types-CF7YDNpg.js";import{F as ze,a,b as n,c as i,d as l,e as o,f as v}from"./form-Dx3lF8C4.js";import{C as Le,P as hs}from"./payment-form-3Jnm-XG2.js";import{U as ve}from"./user-plus-BnoYiih0.js";import{S as Ae}from"./send-Cf7U_e2v.js";import{F as we}from"./file-check-Dbb_BHol.js";import{A as _}from"./arrow-left-DiT6yHBU.js";import{U as ps}from"./upload-BKlhm6vz.js";import"./vendor-15WF5uYg.js";import"./query-C11-Me4M.js";import"./charts-DfbWf95P.js";import"./eye-off-Bubmbnfp.js";function us(g={}){const{user:b}=Be(),{toast:x}=ke(),[D,T]=f.useState(!1),[R,F]=f.useState(0),[w,C]=f.useState([]);return{uploadDocument:async(P,N="other")=>(x({title:"Upload Error",description:"Storage service is not configured",variant:"destructive"}),null),removeDocument:async P=>{w.find(N=>N.id===P)},getDocumentsByType:P=>w.filter(N=>N.docType===P),clearDocuments:()=>{C([])},uploadedDocs:w,isUploading:D,uploadProgress:R,setUploadedDocs:C}}const js=_e({email:c().email("Please enter a valid email address"),fullName:c().min(2,"Full name must be at least 2 characters"),phone:c().optional(),relationship:c().min(1,"Please select a relationship type")}),Ee=[{value:"spouse",label:"Spouse / Partner"},{value:"roommate",label:"Roommate"},{value:"family",label:"Family Member"},{value:"friend",label:"Friend"},{value:"guarantor",label:"Guarantor / Co-Signer"},{value:"other",label:"Other"}],Oe={pending:{label:"Invitation Sent",variant:"secondary",icon:be},verified:{label:"Verified",variant:"default",icon:z},rejected:{label:"Declined",variant:"destructive",icon:rs}};function fs({applicationId:g,coApplicants:b=[],onCoApplicantAdded:x,onCoApplicantRemoved:D,maxCoApplicants:T=3,readonly:R=!1}){const[F,w]=f.useState(!1),[C,J]=f.useState(!1),[u,V]=f.useState(null),[$,P]=f.useState(null),{toast:N}=ke(),I=Ue({resolver:Ye(js),defaultValues:{email:"",fullName:"",phone:"",relationship:""}}),de=async t=>{J(!0);try{const W=await(await he("POST",`/api/applications/${g}/co-applicants`,t)).json();N({title:"Co-applicant invited",description:`An invitation has been sent to ${t.email}`}),I.reset(),w(!1),x&&x(W.data),Ne.invalidateQueries({queryKey:["/api/applications",g]})}catch(y){N({title:"Error",description:y.message||"Failed to add co-applicant. Please try again.",variant:"destructive"})}finally{J(!1)}},te=async t=>{V(t);try{await he("DELETE",`/api/applications/${g}/co-applicants/${t}`),N({title:"Co-applicant removed",description:"The co-applicant has been removed from your application."}),D&&D(t),Ne.invalidateQueries({queryKey:["/api/applications",g]})}catch{N({title:"Error",description:"Failed to remove co-applicant. Please try again.",variant:"destructive"})}finally{V(null)}},X=async(t,y)=>{P(t);try{await he("POST",`/api/applications/${g}/co-applicants/${t}/resend`),N({title:"Invitation resent",description:`A new invitation has been sent to ${y}`})}catch{N({title:"Error",description:"Failed to resend invitation. Please try again.",variant:"destructive"})}finally{P(null)}},me=b.length<T;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Co-Applicants"}),e.jsxs(Ce,{variant:"outline",className:"ml-2",children:[b.length,"/",T]})]}),!R&&me&&e.jsxs($e,{open:F,onOpenChange:w,children:[e.jsx(es,{asChild:!0,children:e.jsxs(h,{size:"sm","data-testid":"button-add-co-applicant",children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),"Add Co-Applicant"]})}),e.jsxs(qe,{className:"sm:max-w-md",children:[e.jsx(Me,{children:"Add Co-Applicant"}),e.jsx(Ve,{children:"Enter the details of the person you want to add to your application. They will receive an email invitation to complete their portion."}),e.jsx(ze,{...I,children:e.jsxs("form",{onSubmit:I.handleSubmit(de),className:"space-y-4",children:[e.jsx(a,{control:I.control,name:"fullName",render:({field:t})=>e.jsxs(n,{children:[e.jsxs(i,{children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(m,{placeholder:"John Doe","data-testid":"input-co-applicant-name",...t})}),e.jsx(o,{})]})}),e.jsx(a,{control:I.control,name:"email",render:({field:t})=>e.jsxs(n,{children:[e.jsxs(i,{children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(m,{type:"email",placeholder:"john@example.com","data-testid":"input-co-applicant-email",...t})}),e.jsx(v,{children:"An invitation will be sent to this email"}),e.jsx(o,{})]})}),e.jsx(a,{control:I.control,name:"phone",render:({field:t})=>e.jsxs(n,{children:[e.jsx(i,{children:"Phone Number"}),e.jsx(l,{children:e.jsx(m,{type:"tel",placeholder:"(555) 123-4567","data-testid":"input-co-applicant-phone",...t})}),e.jsx(o,{})]})}),e.jsx(a,{control:I.control,name:"relationship",render:({field:t})=>e.jsxs(n,{children:[e.jsxs(i,{children:["Relationship ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(je,{onValueChange:t.onChange,defaultValue:t.value,children:[e.jsx(l,{children:e.jsx(fe,{"data-testid":"select-co-applicant-relationship",children:e.jsx(ge,{placeholder:"Select relationship type"})})}),e.jsx(ye,{children:Ee.map(y=>e.jsx(B,{value:y.value,children:y.label},y.value))})]}),e.jsx(o,{})]})}),e.jsxs(ss,{children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>w(!1),disabled:C,children:"Cancel"}),e.jsx(h,{type:"submit",disabled:C,"data-testid":"button-submit-co-applicant",children:C?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"mr-2 h-4 w-4"}),"Send Invitation"]})})]})]})})]})]})]}),b.length===0?e.jsx(k,{className:"border-dashed",children:e.jsxs(S,{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(ue,{className:"h-12 w-12 text-muted-foreground/50 mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"No co-applicants added yet"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:R?"No co-applicants were added to this application":"Add a spouse, roommate, or guarantor to strengthen your application"})]})}):e.jsx("div",{className:"space-y-3",children:b.map(t=>{const y=Oe[t.status]||Oe.pending,W=y.icon,Se=Ee.find(xe=>xe.value===t.relationship);return e.jsx(k,{className:"overflow-hidden",children:e.jsx(S,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center shrink-0",children:e.jsx(ts,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h4",{className:"font-medium truncate","data-testid":`text-co-applicant-name-${t.id}`,children:t.fullName}),e.jsxs(Ce,{variant:y.variant,className:"shrink-0",children:[e.jsx(W,{className:"mr-1 h-3 w-3"}),y.label]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-muted-foreground flex-wrap",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(as,{className:"h-3.5 w-3.5"}),t.email]}),t.phone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ns,{className:"h-3.5 w-3.5"}),t.phone]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[Se?.label||t.relationship,t.invitedAt&&e.jsxs("span",{className:"ml-2",children:["· Invited ",new Date(t.invitedAt).toLocaleDateString()]})]})]})]}),!R&&e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[t.status==="pending"&&e.jsx(h,{size:"sm",variant:"ghost",onClick:()=>X(t.id,t.email),disabled:$===t.id,"data-testid":`button-resend-invite-${t.id}`,children:$===t.id?e.jsx(se,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"h-4 w-4 mr-1"}),"Resend"]})}),e.jsx(h,{size:"icon",variant:"ghost",onClick:()=>te(t.id),disabled:u===t.id,className:"text-destructive hover:text-destructive","data-testid":`button-remove-co-applicant-${t.id}`,children:u===t.id?e.jsx(se,{className:"h-4 w-4 animate-spin"}):e.jsx(He,{className:"h-4 w-4"})})]})]})})},t.id)})}),!R&&b.length>0&&b.some(t=>t.status==="pending")&&e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-950 border border-amber-200 dark:border-amber-800 rounded-lg p-3 flex gap-2",children:[e.jsx(ee,{className:"h-4 w-4 text-amber-600 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:"Co-applicants with pending status need to complete their verification before your application can be fully processed."})]})]})}function gs({variant:g="compact",className:b,showDataCollection:x=!0,showSecurityInfo:D=!0,showPrivacyPolicy:T=!0}){return g==="inline"?e.jsxs("div",{className:oe("flex items-center gap-2 text-xs text-muted-foreground",b),children:[e.jsx(ce,{className:"h-3 w-3"}),e.jsx("span",{children:"Your information is protected with bank-level encryption"})]}):g==="compact"?e.jsxs("div",{className:oe("bg-muted/30 rounded-lg p-3 space-y-2",b),children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-foreground",children:[e.jsx(re,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),e.jsx("span",{children:"Your Privacy Matters"})]}),e.jsxs("div",{className:"space-y-1.5 text-xs text-muted-foreground",children:[D&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ce,{className:"h-3 w-3 mt-0.5 shrink-0"}),e.jsx("span",{children:"All data is encrypted with 256-bit SSL protection"})]}),x&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Pe,{className:"h-3 w-3 mt-0.5 shrink-0"}),e.jsx("span",{children:"We only collect information necessary for your application"})]}),T&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(we,{className:"h-3 w-3 mt-0.5 shrink-0"}),e.jsxs("span",{children:["View our"," ",e.jsx("a",{href:"/privacy",className:"text-primary hover:underline",children:"Privacy Policy"})]})]})]})]}):e.jsxs("div",{className:oe("bg-accent/50 border border-border rounded-lg p-4",b),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(re,{className:"h-5 w-5 text-primary"}),e.jsx("h4",{className:"font-semibold text-foreground",children:"Privacy & Security Notice"})]}),e.jsxs("div",{className:"space-y-3 text-sm text-muted-foreground",children:[x&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-muted rounded-full p-1.5 shrink-0",children:e.jsx(Pe,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:"Data Collection"}),e.jsx("p",{className:"text-xs mt-0.5",children:"We collect only the information necessary to process your rental application. Your personal data will never be sold to third parties."})]})]}),D&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-muted rounded-full p-1.5 shrink-0",children:e.jsx(ce,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:"Bank-Level Security"}),e.jsx("p",{className:"text-xs mt-0.5",children:"All data is encrypted using 256-bit SSL encryption. Payment information is processed through PCI-DSS Level 1 compliant systems."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-muted rounded-full p-1.5 shrink-0",children:e.jsx(we,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:"Your Rights"}),e.jsx("p",{className:"text-xs mt-0.5",children:"You have the right to access, correct, or delete your personal information at any time. Contact us at privacy@choiceproperties.com for any privacy-related requests."})]})]})]}),T&&e.jsx("div",{className:"mt-4 pt-3 border-t border-border",children:e.jsxs("a",{href:"/privacy",className:"text-xs text-primary hover:underline flex items-center gap-1",children:[e.jsx(is,{className:"h-3 w-3"}),"Read our full Privacy Policy and Terms of Service"]})})]})}function ys({className:g}){return e.jsxs("div",{className:oe("flex flex-wrap items-center justify-center gap-4",g),children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground bg-muted/50 px-2 py-1 rounded",children:[e.jsx(re,{className:"h-3 w-3 text-green-600 dark:text-green-400"}),e.jsx("span",{children:"SSL Secured"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground bg-muted/50 px-2 py-1 rounded",children:[e.jsx(ce,{className:"h-3 w-3 text-green-600 dark:text-green-400"}),e.jsx("span",{children:"PCI Compliant"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground bg-muted/50 px-2 py-1 rounded",children:[e.jsx(we,{className:"h-3 w-3 text-green-600 dark:text-green-400"}),e.jsx("span",{children:"FCRA Compliant"})]})]})}const bs=_e({firstName:c().min(2,"First name is required"),lastName:c().min(2,"Last name is required"),email:c().email("Invalid email address"),phone:c().min(10,"Phone number is required"),dateOfBirth:c().min(1,"Date of birth is required"),currentAddress:c().min(5,"Current address is required"),ssn:c().optional(),prevAddress:c().optional(),prevLandlord:c().optional(),prevLandlordPhone:c().refine(g=>!g||g.replace(/\D/g,"").length===10,"Phone number must be exactly 10 digits").optional(),yearsRenting:c().optional(),reasonForLeaving:c().optional(),employer:c().min(2,"Employer name is required"),position:c().min(2,"Position is required"),income:c().min(1,"Monthly income is required"),employmentLength:c().min(1,"Employment length is required"),reference1Name:c().optional(),reference1Phone:c().optional(),reference1Relationship:c().optional(),reference2Name:c().optional(),reference2Phone:c().optional(),reference2Relationship:c().optional(),hasPets:le().default(!1),petDescription:c().optional(),smokingStatus:c().default("no"),numberOfOccupants:c().min(1,"Number of occupants is required"),criminalHistory:le().default(!1),criminalDetails:c().optional(),moveInDate:c().min(1,"Move-in date is required"),agreeToBackgroundCheck:le().refine(g=>g===!0,"You must consent to background check"),agreeToTerms:le().refine(g=>g===!0,"You must agree to the terms"),signature:c().min(2,"Signature is required")}),pe=[{id:1,label:"Personal Info"},{id:2,label:"Rental History"},{id:3,label:"Employment"},{id:4,label:"References"},{id:5,label:"Disclosures"},{id:6,label:"Documents"},{id:7,label:"Review & Sign"}];function $s(){f.useEffect(()=>{ls({title:"Apply for Rental - Choice Properties",description:"Start your rental application with Choice Properties. Quick, easy, and secure."})},[]);const[g,b]=os(),[x,D]=f.useState(null),[T,R]=f.useState(null),{user:F}=Be();f.useEffect(()=>{const p=new URLSearchParams(window.location.search).get("propertyId");R(p),p&&fetch(`/api/v2/properties/${p}`).then(j=>j.json()).then(j=>D(j.data)).catch(j=>console.error("Failed to load property:",j))},[]);const{toast:w}=ke(),[C,J]=f.useState(!1),[u,V]=f.useState(1),[$,P]=f.useState(!1),[N,I]=f.useState("id"),[de,te]=f.useState(!1),[X,me]=f.useState(null),[t,y]=f.useState([]),[W,Se]=f.useState(!1),{uploadDocument:xe,removeDocument:Je,uploadedDocs:L,isUploading:ae,uploadProgress:Xe}=us(),G=`choiceProperties_applicationDraft_${T||"general"}`,d=(()=>{try{const s=localStorage.getItem(G);if(s){const p=JSON.parse(s);if(p.savedAt&&Date.now()-p.savedAt<10080*60*1e3)return p.data;localStorage.removeItem(G)}}catch(s){console.error("Error loading draft:",s)}return null})(),r=Ue({resolver:Ye(bs),defaultValues:{firstName:d?.firstName||"",lastName:d?.lastName||"",email:d?.email||"",phone:d?.phone||"",dateOfBirth:d?.dateOfBirth||"",currentAddress:d?.currentAddress||"",ssn:d?.ssn||"",prevAddress:d?.prevAddress||"",prevLandlord:d?.prevLandlord||"",prevLandlordPhone:d?.prevLandlordPhone||"",yearsRenting:d?.yearsRenting||"",reasonForLeaving:d?.reasonForLeaving||"",employer:d?.employer||"",position:d?.position||"",income:d?.income||"",employmentLength:d?.employmentLength||"",reference1Name:d?.reference1Name||"",reference1Phone:d?.reference1Phone||"",reference1Relationship:d?.reference1Relationship||"",reference2Name:d?.reference2Name||"",reference2Phone:d?.reference2Phone||"",reference2Relationship:d?.reference2Relationship||"",hasPets:d?.hasPets||!1,petDescription:d?.petDescription||"",smokingStatus:d?.smokingStatus||"no",numberOfOccupants:d?.numberOfOccupants||"1",criminalHistory:d?.criminalHistory||!1,criminalDetails:d?.criminalDetails||"",moveInDate:d?.moveInDate||"",agreeToBackgroundCheck:!1,agreeToTerms:!1,signature:""},mode:"onChange"});f.useEffect(()=>{const s=r.watch(p=>{if(!C&&p.firstName){const j={...p};delete j.agreeToBackgroundCheck,delete j.agreeToTerms,delete j.signature,localStorage.setItem(G,JSON.stringify({data:j,savedAt:Date.now(),step:u}))}});return()=>s.unsubscribe()},[r,C,u,G]);const We=async s=>{if(s.target.files&&s.target.files.length>0){const p=Array.from(s.target.files);for(const j of p)await xe(j,N);s.target.value=""}},Ge=s=>{Je(s)},H=async()=>{let s=[];u===1?s=["firstName","lastName","email","phone","dateOfBirth","currentAddress"]:u===3?s=["employer","position","income","employmentLength","moveInDate"]:u===5?(s=["numberOfOccupants"],r.getValues("hasPets")&&s.push("petDescription"),r.getValues("criminalHistory")&&s.push("criminalDetails")):u===7&&(s=["agreeToBackgroundCheck","agreeToTerms","signature"]),(s.length===0||await r.trigger(s))&&(V(j=>Math.min(j+1,7)),window.scrollTo(0,0))},U=()=>{V(s=>Math.max(s-1,1)),window.scrollTo(0,0)},Ke=async s=>{P(!0);try{const p=await xs(),j={propertyId:T||"",personalInfo:{firstName:s.firstName,lastName:s.lastName,email:s.email,phone:s.phone,dateOfBirth:s.dateOfBirth,currentAddress:s.currentAddress,ssn:s.ssn,ssnProvided:!!s.ssn&&s.ssn.length>0},rentalHistory:{prevAddress:s.prevAddress,prevLandlord:s.prevLandlord,prevLandlordPhone:s.prevLandlordPhone,reasonForLeaving:s.reasonForLeaving,yearsRenting:s.yearsRenting},employment:{employer:s.employer,position:s.position,income:s.income,monthlyIncome:s.income,employmentLength:s.employmentLength,yearsEmployed:s.employmentLength,moveInDate:s.moveInDate},references:{reference1:{name:s.reference1Name,phone:s.reference1Phone,relationship:s.reference1Relationship},reference2:{name:s.reference2Name,phone:s.reference2Phone,relationship:s.reference2Relationship}},disclosures:{hasPets:s.hasPets,petDescription:s.petDescription,smokingStatus:s.smokingStatus,numberOfOccupants:s.numberOfOccupants,criminalHistory:s.criminalHistory,criminalDetails:s.criminalDetails},documents:L.map(q=>({id:q.id,name:q.name,type:q.type,url:q.url,storagePath:q.storagePath,docType:q.docType,uploadedAt:q.uploadedAt})),applicationFee:x?.application_fee||50,signature:s.signature},K=await fetch("/api/applications/guest",{method:"POST",headers:{"Content-Type":"application/json",...p?{Authorization:`Bearer ${p}`}:{}},body:JSON.stringify({...j,guestEmail:F?void 0:s.email,guestName:F?void 0:`${s.firstName} ${s.lastName}`})});if(!K.ok)throw new Error("Failed to submit application");const Q=await K.json();if(Q?.data?.id)me(Q.data.id),F&&Ne.invalidateQueries({queryKey:["/api/applications/user",F.id]});else throw new Error("No application ID returned");localStorage.removeItem(G),J(!0),window.scrollTo(0,0),w({title:"Application Submitted!",description:"Your rental application has been received."})}catch(p){console.error("Failed to submit application:",p),w({title:"Error",description:"Failed to submit application. Please try again.",variant:"destructive"})}finally{P(!1)}};if(C)return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(De,{}),e.jsx("div",{className:"flex-1 p-4 bg-muted/20",children:e.jsxs("div",{className:"container mx-auto max-w-4xl space-y-6",children:[e.jsx(k,{className:"border-t-4 border-t-green-500 shadow-2xl",children:e.jsx(S,{className:"p-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-green-100 dark:bg-green-950 rounded-full flex items-center justify-center mx-auto mb-6 text-green-600 dark:text-green-400 animate-in zoom-in duration-500",children:e.jsx(Te,{className:"h-12 w-12"})}),e.jsx("h2",{className:"text-3xl font-bold text-primary mb-4",children:"Application Submitted Successfully!"}),e.jsxs("p",{className:"text-muted-foreground text-lg mb-8",children:["Thank you for applying",x?` for ${x.title}`:"",". Your application has been received and is now being reviewed."]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/50 border border-blue-200 dark:border-blue-800 rounded-lg p-6 mb-8 text-left",children:[e.jsxs("h3",{className:"font-bold text-blue-900 dark:text-blue-100 mb-4 flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5"}),"Verification Process"]}),e.jsxs("ul",{className:"space-y-3 text-blue-800 dark:text-blue-200",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-600 dark:bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Document Review (1-2 days):"})," Our team reviews your submitted documents for completeness."]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-600 dark:bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Identity Verification (1-2 days):"})," We verify your identity against government-issued documents."]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-600 dark:bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Employment & Income Verification (2-3 days):"})," We confirm your employment status and income with your employer."]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-600 dark:bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"4"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Background Screening (2-4 days):"})," Comprehensive background check is conducted."]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-600 dark:bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"5"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Rental History (2-3 days):"})," We contact previous landlords to verify your rental history."]})]})]}),e.jsx("p",{className:"mt-4 text-sm text-blue-700 dark:text-blue-300",children:"Total estimated time: 5-10 business days. You'll receive email updates at each step."})]}),x&&e.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border border-amber-200 dark:border-amber-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Le,{className:"h-5 w-5 text-amber-700 dark:text-amber-400"}),e.jsxs("h4",{className:"font-bold text-amber-900 dark:text-amber-100",children:["Application Processing Fee: $",x.application_fee||50]})]}),e.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:"Pay now to expedite your application processing and background check."})]}),e.jsxs(h,{onClick:()=>te(!0),className:"bg-amber-600 hover:bg-amber-700 text-white","data-testid":"button-pay-now",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Pay $",x.application_fee||50]})]})}),e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsx(h,{onClick:()=>b("/"),variant:"outline",className:"flex-1 h-12 text-lg font-bold min-w-[200px]",children:"Return Home"}),F&&e.jsx(h,{onClick:()=>b("/applications"),className:"flex-1 bg-primary h-12 text-lg font-bold min-w-[200px]",children:"View My Applications"}),e.jsx(h,{onClick:()=>b("/properties"),variant:"secondary",className:"flex-1 h-12 text-lg font-bold min-w-[200px]",children:"Browse More Properties"})]})]})})}),X&&F&&e.jsxs(k,{children:[e.jsxs(A,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5 text-primary"}),"Add Co-Applicants (Optional)"]}),e.jsx(O,{children:"Adding a spouse, roommate, or guarantor can strengthen your application."})]}),e.jsx(S,{children:e.jsx(fs,{applicationId:X,coApplicants:t,onCoApplicantAdded:s=>y([...t,s]),onCoApplicantRemoved:s=>y(t.filter(p=>p.id!==s))})})]})]})}),e.jsx($e,{open:de,onOpenChange:te,children:e.jsxs(qe,{className:"sm:max-w-lg",children:[e.jsxs(cs,{children:[e.jsx(Me,{children:"Application Processing Fee"}),e.jsx(Ve,{children:"Pay the application fee to expedite your application review."})]}),e.jsx(hs,{amount:x?.application_fee||50,propertyAddress:x?.address,applicationId:X||void 0,onError:s=>{w({title:"Payment Failed",description:s,variant:"destructive"})}})]})}),e.jsx(Fe,{})]});const Qe=(u-1)/(pe.length-1)*100,Ze=Math.ceil((7-u+1)*2);return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(De,{}),e.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary text-white py-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full transform translate-x-10 -translate-y-10"}),e.jsx("div",{className:"container mx-auto px-4 relative z-10",children:e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:e.jsxs("div",{className:"max-w-3xl",children:[e.jsxs("h1",{className:"font-heading text-3xl font-bold mb-2 flex items-center gap-3",children:[e.jsx(Ie,{className:"h-8 w-8 text-accent"}),"Rental Application"]}),e.jsx("p",{className:"text-white/90",children:x?`Applying for: ${x.title} - $${x.price.toLocaleString()}/mo`:"Complete the form below to apply for a property."}),e.jsxs("div",{className:"mt-4 flex items-center gap-3 text-sm",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsxs("span",{children:["Est. time: ",Ze," mins remaining"]})]})]})})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-950 border-b sticky top-16 z-40 shadow-sm",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"relative mb-2",children:e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-secondary transition-all duration-500 ease-out",style:{width:`${Qe}%`}})})}),e.jsxs("div",{className:"flex justify-between text-xs font-medium text-muted-foreground",children:[pe.map(s=>e.jsx("span",{className:`${u>=s.id?"text-primary font-bold":""} transition-colors hidden md:block`,children:s.label},s.id)),e.jsxs("span",{className:"md:hidden text-primary font-bold",children:["Step ",u," of ",pe.length]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2 flex items-center gap-1",children:[e.jsx(z,{className:"h-3 w-3 text-green-500"}),"Progress auto-saved"]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8 flex-1 bg-muted/10",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(ze,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(Ke),className:"space-y-8",children:[u===1&&e.jsxs(k,{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs(A,{children:[e.jsxs(E,{className:"flex items-center gap-2 text-primary",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-sm",children:"1"}),"Personal Information"]}),e.jsx(O,{children:"Tell us about yourself. All fields are required."})]}),e.jsxs(S,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(a,{control:r.control,name:"firstName",render:({field:s})=>e.jsxs(n,{children:[e.jsxs(i,{children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(m,{placeholder:"John",...s})}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"lastName",render:({field:s})=>e.jsxs(n,{children:[e.jsxs(i,{children:["Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(m,{placeholder:"Doe",...s})}),e.jsx(o,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(a,{control:r.control,name:"email",render:({field:s})=>e.jsxs(n,{children:[e.jsxs(i,{children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(m,{type:"email",placeholder:"john@example.com",...s})}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"phone",render:({field:s})=>e.jsxs(n,{children:[e.jsxs(i,{children:["Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(m,{placeholder:"(707) 706-3137",...s})}),e.jsx(o,{})]})})]}),e.jsx(a,{control:r.control,name:"dateOfBirth",render:({field:s})=>e.jsxs(n,{children:[e.jsxs(i,{children:["Date of Birth ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(m,{type:"date",...s})}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"currentAddress",render:({field:s})=>e.jsxs(n,{children:[e.jsxs(i,{children:["Current Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(Z,{placeholder:"123 Main St, City, State, Zip",...s})}),e.jsx(v,{children:"Include street, city, state, and zip code"}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"ssn",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Social Security Number (optional)"}),e.jsx(l,{children:e.jsx(m,{placeholder:"XXX-XX-XXXX",...s,type:"password"})}),e.jsx(v,{children:"Providing your SSN helps with credit verification and improves your application score"}),e.jsx(o,{})]})})]}),e.jsx(M,{className:"justify-end pt-6 border-t bg-muted/5",children:e.jsxs(h,{type:"button",onClick:H,className:"bg-secondary hover:bg-secondary/90 text-primary-foreground font-bold",children:["Next Step ",e.jsx(Y,{className:"ml-2 h-4 w-4"})]})})]}),u===2&&e.jsxs(k,{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs(A,{children:[e.jsxs(E,{className:"flex items-center gap-2 text-primary",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-sm",children:"2"}),"Rental History"]}),e.jsx(O,{children:"Tell us about your previous rental experience (optional but recommended)."})]}),e.jsxs(S,{className:"space-y-6",children:[e.jsx(a,{control:r.control,name:"prevAddress",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Previous Address"}),e.jsx(l,{children:e.jsx(Z,{placeholder:"456 Previous St, City, State, Zip",...s})}),e.jsx(v,{children:"Your last rental address"}),e.jsx(o,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(a,{control:r.control,name:"prevLandlord",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Previous Landlord Name"}),e.jsx(l,{children:e.jsx(m,{placeholder:"Property Manager Name",...s})}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"prevLandlordPhone",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Previous Landlord Phone"}),e.jsx(l,{children:e.jsx(m,{placeholder:"(555) 987-6543",...s,"data-testid":"input-landlord-phone"})}),e.jsx(v,{children:"Enter a valid phone number (10 digits)"}),e.jsx(o,{})]})})]}),e.jsx(a,{control:r.control,name:"yearsRenting",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Years of Rental History"}),e.jsx(l,{children:e.jsx(m,{placeholder:"e.g., 3 years, 2, or 6 months",...s})}),e.jsx(v,{children:"How long have you been renting?"}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"reasonForLeaving",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Reason for Leaving"}),e.jsx(l,{children:e.jsx(Z,{placeholder:"E.g., Job relocation, needed larger space, etc.",...s})}),e.jsx(o,{})]})})]}),e.jsxs(M,{className:"justify-between pt-6 border-t bg-muted/5",children:[e.jsxs(h,{type:"button",variant:"outline",onClick:U,children:[e.jsx(_,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(h,{type:"button",onClick:H,className:"bg-secondary hover:bg-secondary/90 text-primary-foreground font-bold",children:["Next Step ",e.jsx(Y,{className:"ml-2 h-4 w-4"})]})]})]}),u===3&&e.jsxs(k,{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs(A,{children:[e.jsxs(E,{className:"flex items-center gap-2 text-primary",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-sm",children:"3"}),"Employment & Income"]}),e.jsx(O,{children:"Help us verify your income and employment."})]}),e.jsxs(S,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(a,{control:r.control,name:"employer",render:({field:s})=>e.jsxs(n,{children:[e.jsxs(i,{children:["Current Employer ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(m,{placeholder:"Company Name",...s})}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"position",render:({field:s})=>e.jsxs(n,{children:[e.jsxs(i,{children:["Position/Job Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(m,{placeholder:"Software Engineer",...s})}),e.jsx(o,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(a,{control:r.control,name:"income",render:({field:s})=>{const p=parseFloat(s.value||"0"),j=x?.price||0,K=j*3,Q=p>=K;return e.jsxs(n,{children:[e.jsxs(i,{children:["Monthly Income ($) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(m,{placeholder:"5000",type:"number",...s,"data-testid":"input-income"})}),e.jsx(v,{children:"Before taxes"}),j>0&&s.value&&!Q&&e.jsxs("p",{className:"text-sm text-orange-600 dark:text-orange-400 flex items-center gap-1 mt-1",children:[e.jsx(ee,{className:"h-4 w-4"}),"Income should be at least 3x rent ($",K.toLocaleString(),"/mo recommended)"]}),j>0&&Q&&s.value&&e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-1 mt-1",children:[e.jsx(z,{className:"h-4 w-4"}),"Meets income requirement"]}),e.jsx(o,{})]})}}),e.jsx(a,{control:r.control,name:"employmentLength",render:({field:s})=>e.jsxs(n,{children:[e.jsxs(i,{children:["Employment Length ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(m,{placeholder:"2 years",...s})}),e.jsx(o,{})]})})]}),e.jsx(a,{control:r.control,name:"moveInDate",render:({field:s})=>e.jsxs(n,{children:[e.jsxs(i,{children:["Desired Move-in Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(m,{type:"date",...s})}),e.jsx(o,{})]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex gap-3 items-start",children:[e.jsx(re,{className:"h-5 w-5 text-blue-600 mt-0.5 shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Income Requirement"}),e.jsx("p",{children:"Your monthly income should be at least 3x the monthly rent. You'll be asked to upload paystubs or proof of income in a later step."})]})]})]}),e.jsxs(M,{className:"justify-between pt-6 border-t bg-muted/5",children:[e.jsxs(h,{type:"button",variant:"outline",onClick:U,children:[e.jsx(_,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(h,{type:"button",onClick:H,className:"bg-secondary hover:bg-secondary/90 text-primary-foreground font-bold",children:["Next Step ",e.jsx(Y,{className:"ml-2 h-4 w-4"})]})]})]}),u===4&&e.jsxs(k,{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs(A,{children:[e.jsxs(E,{className:"flex items-center gap-2 text-primary",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-sm",children:"4"}),"Personal References"]}),e.jsx(O,{children:"Provide contact information for personal references (optional but recommended)."})]}),e.jsxs(S,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-primary"}),"Reference 1"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(a,{control:r.control,name:"reference1Name",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Full Name"}),e.jsx(l,{children:e.jsx(m,{placeholder:"Jane Smith",...s})}),e.jsx(o,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(a,{control:r.control,name:"reference1Phone",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Phone"}),e.jsx(l,{children:e.jsx(m,{placeholder:"(555) 111-2222",...s})}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"reference1Relationship",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Relationship"}),e.jsx(l,{children:e.jsx(m,{placeholder:"Friend, Colleague, etc.",...s})}),e.jsx(o,{})]})})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-primary"}),"Reference 2"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(a,{control:r.control,name:"reference2Name",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Full Name"}),e.jsx(l,{children:e.jsx(m,{placeholder:"Bob Johnson",...s})}),e.jsx(o,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(a,{control:r.control,name:"reference2Phone",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Phone"}),e.jsx(l,{children:e.jsx(m,{placeholder:"(555) 333-4444",...s})}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"reference2Relationship",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Relationship"}),e.jsx(l,{children:e.jsx(m,{placeholder:"Family, Coworker, etc.",...s})}),e.jsx(o,{})]})})]})]})]})]}),e.jsxs(M,{className:"justify-between pt-6 border-t bg-muted/5",children:[e.jsxs(h,{type:"button",variant:"outline",onClick:U,children:[e.jsx(_,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(h,{type:"button",onClick:H,className:"bg-secondary hover:bg-secondary/90 text-primary-foreground font-bold",children:["Next Step ",e.jsx(Y,{className:"ml-2 h-4 w-4"})]})]})]}),u===5&&e.jsxs(k,{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs(A,{children:[e.jsxs(E,{className:"flex items-center gap-2 text-primary",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-sm",children:"5"}),"Additional Disclosures"]}),e.jsx(O,{children:"Please answer the following questions honestly."})]}),e.jsxs(S,{className:"space-y-6",children:[e.jsx(a,{control:r.control,name:"numberOfOccupants",render:({field:s})=>e.jsxs(n,{children:[e.jsxs(i,{children:["Number of Occupants ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(m,{type:"number",min:"1",placeholder:"1",...s})}),e.jsx(v,{children:"Including yourself, how many people will live in the property?"}),e.jsx(o,{})]})}),e.jsx(ne,{}),e.jsx(a,{control:r.control,name:"hasPets",render:({field:s})=>e.jsxs(n,{className:"flex flex-row items-center justify-between rounded-lg border p-4 bg-muted/20",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{className:"text-base",children:"Do you have pets?"}),e.jsx(v,{children:"If yes, please provide details below"})]}),e.jsx(l,{children:e.jsx(ie,{checked:s.value,onCheckedChange:s.onChange})})]})}),r.watch("hasPets")&&e.jsx(a,{control:r.control,name:"petDescription",render:({field:s})=>e.jsxs(n,{className:"animate-in fade-in slide-in-from-top-2",children:[e.jsx(i,{children:"Pet Details"}),e.jsx(l,{children:e.jsx(Z,{placeholder:"Type (dog/cat), breed, weight, age, and any other relevant information",...s})}),e.jsx(o,{})]})}),e.jsx(ne,{}),e.jsx(a,{control:r.control,name:"smokingStatus",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Smoking Status"}),e.jsxs(je,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(l,{children:e.jsx(fe,{"data-testid":"select-smoking-status",children:e.jsx(ge,{placeholder:"Select smoking status"})})}),e.jsxs(ye,{children:[e.jsx(B,{value:"no","data-testid":"select-item-non-smoker",children:"Non-smoker"}),e.jsx(B,{value:"outside","data-testid":"select-item-outside",children:"Smoke outside only"}),e.jsx(B,{value:"yes","data-testid":"select-item-smoker",children:"Yes, I smoke"})]})]}),e.jsx(o,{})]})}),e.jsx(ne,{}),e.jsx(a,{control:r.control,name:"criminalHistory",render:({field:s})=>e.jsxs(n,{className:"flex flex-row items-start justify-between rounded-lg border p-4 bg-muted/20",children:[e.jsxs("div",{className:"space-y-0.5 flex-1 pr-4",children:[e.jsx(i,{className:"text-base",children:"Criminal History Disclosure"}),e.jsx(v,{children:"Have you ever been convicted of a felony or misdemeanor? (Disclosure is required by law and does not automatically disqualify you)"})]}),e.jsx(l,{children:e.jsx(ie,{checked:s.value,onCheckedChange:s.onChange})})]})}),r.watch("criminalHistory")&&e.jsx(a,{control:r.control,name:"criminalDetails",render:({field:s})=>e.jsxs(n,{className:"animate-in fade-in slide-in-from-top-2",children:[e.jsx(i,{children:"Please Explain"}),e.jsx(l,{children:e.jsx(Z,{placeholder:"Brief description of the conviction and date",...s})}),e.jsx(v,{children:"This information is confidential and will only be reviewed by authorized personnel."}),e.jsx(o,{})]})})]}),e.jsxs(M,{className:"justify-between pt-6 border-t bg-muted/5",children:[e.jsxs(h,{type:"button",variant:"outline",onClick:U,children:[e.jsx(_,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(h,{type:"button",onClick:H,className:"bg-secondary hover:bg-secondary/90 text-primary-foreground font-bold",children:["Next Step ",e.jsx(Y,{className:"ml-2 h-4 w-4"})]})]})]}),u===6&&e.jsxs(k,{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs(A,{children:[e.jsxs(E,{className:"flex items-center gap-2 text-primary",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-sm",children:"6"}),"Document Upload"]}),e.jsx(O,{children:"Please upload proof of income and identification."})]}),e.jsxs(S,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(ds,{children:"Document Type"}),e.jsxs(je,{value:N,onValueChange:s=>I(s),children:[e.jsx(fe,{className:"w-full","data-testid":"select-doc-type",children:e.jsx(ge,{placeholder:"Select document type"})}),e.jsxs(ye,{children:[e.jsx(B,{value:"id","data-testid":"select-item-id",children:"Government-issued ID"}),e.jsx(B,{value:"proof_of_income","data-testid":"select-item-income",children:"Proof of Income"}),e.jsx(B,{value:"employment_verification","data-testid":"select-item-employment",children:"Employment Verification"}),e.jsx(B,{value:"other","data-testid":"select-item-other",children:"Other Document"})]})]})]}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors relative ${ae?"border-primary bg-primary/5":"border-muted-foreground/25 hover:bg-muted/10 cursor-pointer"}`,children:[e.jsx("input",{type:"file",onChange:We,className:"absolute inset-0 opacity-0 cursor-pointer",accept:".pdf,.jpg,.jpeg,.png",multiple:!0,disabled:ae,"data-testid":"input-file-upload"}),e.jsx("div",{className:"flex flex-col items-center gap-2",children:ae?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"h-8 w-8 animate-spin text-primary"}),e.jsxs("h4",{className:"font-semibold text-lg",children:["Uploading... ",Xe,"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-secondary/10 rounded-full flex items-center justify-center text-secondary",children:e.jsx(ps,{className:"h-8 w-8"})}),e.jsx("h4",{className:"font-semibold text-lg",children:"Click or drag files to upload"}),e.jsx("p",{className:"text-muted-foreground text-sm max-w-md mx-auto",children:"PDF, JPG, or PNG files. Max 5MB each."})]})})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Required Documents:"}),e.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1 list-disc list-inside",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[L.some(s=>s.docType==="id")?e.jsx(z,{className:"h-4 w-4 text-green-500"}):e.jsx(ee,{className:"h-4 w-4 text-blue-500"}),"Government-issued photo ID (Driver's License, Passport, or State ID)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[L.some(s=>s.docType==="proof_of_income")?e.jsx(z,{className:"h-4 w-4 text-green-500"}):e.jsx(ee,{className:"h-4 w-4 text-blue-500"}),"Proof of income (Recent pay stubs, bank statements, or tax returns)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[L.some(s=>s.docType==="employment_verification")?e.jsx(z,{className:"h-4 w-4 text-green-500"}):e.jsx(ee,{className:"h-4 w-4 text-orange-500"}),"Letter of employment (optional but recommended)"]})]})]}),L.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium text-sm",children:["Uploaded Documents (",L.length,")"]}),L.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/20 rounded-md","data-testid":`card-uploaded-doc-${s.id}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx(Ie,{className:"h-5 w-5 text-primary shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"text-sm font-medium truncate block max-w-[200px]",children:s.name}),e.jsxs("span",{className:"text-xs text-muted-foreground capitalize",children:[s.docType.replace(/_/g," ")," • ",(s.size/1024/1024).toFixed(2),"MB"]})]}),e.jsx("span",{className:"text-xs text-muted-foreground uppercase border px-1 rounded shrink-0",children:s.type.split("/")[1]||"FILE"})]}),e.jsx(h,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:bg-destructive/10 shrink-0",onClick:()=>Ge(s.id),"data-testid":`button-remove-doc-${s.id}`,children:e.jsx(He,{className:"h-4 w-4"})})]},s.id))]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 p-4 rounded-lg flex gap-3 items-start",children:[e.jsx(re,{className:"h-5 w-5 text-green-600 mt-0.5 shrink-0"}),e.jsxs("div",{className:"text-sm text-green-900 dark:text-green-100",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Secure & Encrypted"}),e.jsx("p",{children:"Your documents are encrypted and stored securely. We only share this information with the property management team for verification purposes."})]})]})]}),e.jsxs(M,{className:"justify-between pt-6 border-t bg-muted/5 gap-2",children:[e.jsxs(h,{type:"button",variant:"outline",onClick:U,children:[e.jsx(_,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(h,{type:"button",onClick:H,className:"bg-secondary hover:bg-secondary/90 text-primary-foreground font-bold",disabled:ae,children:["Next Step ",e.jsx(Y,{className:"ml-2 h-4 w-4"})]})]})]}),u===7&&e.jsxs(k,{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs(A,{children:[e.jsxs(E,{className:"flex items-center gap-2 text-primary",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-sm",children:"7"}),"Review & Signature"]}),e.jsx(O,{children:"Review your information and sign to submit your application."})]}),e.jsxs(S,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-muted/30 p-6 rounded-lg space-y-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Application Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Applicant Name"}),e.jsxs("p",{className:"font-semibold",children:[r.watch("firstName")," ",r.watch("lastName")]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Email"}),e.jsx("p",{className:"font-semibold",children:r.watch("email")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Monthly Income"}),e.jsxs("p",{className:"font-semibold",children:["$",r.watch("income")]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Move-in Date"}),e.jsx("p",{className:"font-semibold",children:r.watch("moveInDate")||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Employer"}),e.jsx("p",{className:"font-semibold",children:r.watch("employer")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Documents Uploaded"}),e.jsxs("p",{className:"font-semibold",children:[L.length," file(s)"]})]})]})]}),e.jsx(ne,{}),e.jsx(a,{control:r.control,name:"agreeToBackgroundCheck",render:({field:s})=>e.jsxs(n,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(l,{children:e.jsx(ie,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsxs(i,{className:"font-semibold",children:["Background Check Consent ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(v,{children:"I authorize Choice Properties and the property owner to conduct a background check, credit check, and verify my employment and rental history. I understand this may include criminal records, eviction records, and credit reports."}),e.jsx(o,{})]})]})}),e.jsx(a,{control:r.control,name:"agreeToTerms",render:({field:s})=>e.jsxs(n,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(l,{children:e.jsx(ie,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsxs(i,{className:"font-semibold",children:["Terms and Conditions ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(v,{children:["I certify that all information provided in this application is true and accurate. I understand that false information may result in denial of my application or termination of my lease. I have read and agree to the"," ",e.jsx(Re,{href:"/terms",className:"text-primary underline",children:"Terms & Conditions"})," and"," ",e.jsx(Re,{href:"/privacy",className:"text-primary underline",children:"Privacy Policy"}),"."]}),e.jsx(o,{})]})]})}),e.jsx(a,{control:r.control,name:"signature",render:({field:s})=>e.jsxs(n,{children:[e.jsxs(i,{children:["Electronic Signature ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(m,{placeholder:"Type your full name as signature",...s,className:"font-serif text-lg"})}),e.jsx(v,{children:"By typing your name, you agree that this constitutes a legal signature confirming that all information is accurate and complete."}),e.jsx(o,{})]})}),x&&e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-950/50 border border-yellow-200 dark:border-yellow-800 p-4 rounded-lg flex gap-3 items-start",children:[e.jsx(ms,{className:"h-5 w-5 text-yellow-700 dark:text-yellow-400 mt-0.5 shrink-0"}),e.jsxs("div",{className:"text-sm text-yellow-900 dark:text-yellow-100",children:[e.jsxs("p",{className:"font-semibold mb-1",children:["Application Fee: $",x.application_fee]}),e.jsxs("p",{children:["Upon approval, a $",x.application_fee," application fee will be charged to cover background check and processing costs."]})]})]}),e.jsx(gs,{variant:"full",className:"mt-4"}),e.jsx(ys,{className:"mt-4"})]}),e.jsxs(M,{className:"justify-between pt-6 border-t bg-muted/5",children:[e.jsxs(h,{type:"button",variant:"outline",onClick:U,disabled:$,children:[e.jsx(_,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(h,{type:"submit",className:"bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-600 text-white font-bold px-8",disabled:$,children:$?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"animate-spin mr-2 h-4 w-4"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:["Submit Application ",e.jsx(Te,{className:"ml-2 h-4 w-4"})]})})]})]})]})})})}),e.jsx(Fe,{})]})}export{$s as default};
