import{r as i,j as e}from"./ui-DbSH5uIw.js";import{ad as d,u as f,z as b,a as g,N as y,C as v,aa as j,c as N,L as k,V as w,K as C}from"./index-C3yA2dmm.js";import{B as L}from"./briefcase-EFKpiKWl.js";import"./vendor-15WF5uYg.js";import"./query-C11-Me4M.js";import"./charts-DfbWf95P.js";const R=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],S=d("key",R);const _=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],$=d("user-check",_),c=[{value:"renter",label:"Renter",description:"Looking to rent a property",icon:S},{value:"landlord",label:"Landlord",description:"Individual property owner",icon:j},{value:"property_manager",label:"Property Manager",description:"Manages multiple properties",icon:L},{value:"agent",label:"Real Estate Agent",description:"Licensed real estate professional",icon:$}];function A(){const{user:u,updateUserRole:m}=f(),[,s]=b(),{toast:l}=g(),[r,p]=i.useState("renter"),[o,n]=i.useState(!1),x=async()=>{n(!0);try{await m(r),l({title:"Welcome to Choice Properties!",description:`Your account has been set up as a ${c.find(a=>a.value===r)?.label}.`}),s(r==="agent"?"/agent-dashboard":r==="landlord"||r==="property_manager"?"/landlord-dashboard":r==="renter"?"/renter-dashboard":"/")}catch(a){l({title:"Failed to update role",description:a.message||"Please try again.",variant:"destructive"})}finally{n(!1)}};return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(y,{}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 bg-gradient-to-br from-primary/5 to-secondary/5",children:e.jsxs(v,{className:"max-w-lg w-full p-8 shadow-xl",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-2",children:["Welcome, ",u?.full_name||"there","!"]}),e.jsx("p",{className:"text-muted-foreground",children:"Tell us how you'll be using Choice Properties"})]}),e.jsx("div",{className:"space-y-3 mb-6",children:c.map(a=>{const h=a.icon,t=r===a.value;return e.jsxs("button",{type:"button",onClick:()=>p(a.value),className:`w-full p-4 rounded-lg border-2 transition-all text-left flex items-start gap-4 ${t?"border-primary bg-primary/5":"border-border hover:border-primary/50 hover:bg-muted/50"}`,"data-testid":`button-role-${a.value}`,children:[e.jsx("div",{className:`p-2 rounded-lg ${t?"bg-primary text-primary-foreground":"bg-muted"}`,children:e.jsx(h,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:`font-medium block ${t?"text-primary":""}`,children:a.label}),e.jsx("span",{className:"text-sm text-muted-foreground",children:a.description})]}),t&&e.jsx("div",{className:"h-5 w-5 rounded-full bg-primary flex items-center justify-center",children:e.jsx("svg",{className:"h-3 w-3 text-primary-foreground",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},a.value)})}),e.jsx(N,{onClick:x,disabled:o,className:"w-full",size:"lg","data-testid":"button-continue-role",children:o?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"mr-2 h-4 w-4 animate-spin"}),"Setting up your account..."]}):e.jsxs(e.Fragment,{children:["Continue ",e.jsx(w,{className:"ml-2 h-4 w-4"})]})})]})}),e.jsx(C,{})]})}export{A as default};
