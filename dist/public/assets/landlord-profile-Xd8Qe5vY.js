import{r as j,j as e}from"./ui-DbSH5uIw.js";import{u as C,z as L,a as M,y as _,N as k,c as r,C as u,ay as A,az as P,aA as E,M as b,P as g,ar as I,p as U,I as p,Q as T,L as z,K as D}from"./index-C3yA2dmm.js";import{F as O,a as o,b as n,c as i,d,e as c}from"./form-Dx3lF8C4.js";import{u as Y}from"./forms-DE5E1-IR.js";import{t as B,o as R,s as m}from"./types-CF7YDNpg.js";import{A as J}from"./arrow-left-DiT6yHBU.js";import"./vendor-15WF5uYg.js";import"./query-C11-Me4M.js";import"./charts-DfbWf95P.js";const K=R({fullName:m().min(2,"Full name must be at least 2 characters"),email:m().email("Invalid email address"),phone:m().optional(),bio:m().max(500,"Bio must be less than 500 characters").optional()});function ee(){const{user:s,logout:N,isLoggedIn:v}=C(),[,x]=L(),{toast:h}=M(),[l,f]=j.useState(!1),t=Y({resolver:B(K),defaultValues:{fullName:s?.full_name||"",email:s?.email||"",phone:s?.phone||"",bio:s?.bio||""}});if(j.useEffect(()=>{_({title:"My Profile - Landlord Dashboard",description:"Manage your landlord profile and settings",image:"https://choiceproperties.com/og-image.png",url:"https://choiceproperties.com/landlord-profile"})},[]),!v||!s||s.role!=="landlord"&&s.role!=="property_manager"&&s.role!=="admin")return x("/login"),null;const y=async a=>{f(!0);try{h({title:"Profile Updated",description:"Your profile has been successfully updated."})}catch(F){h({title:"Error",description:F.message||"Failed to update profile",variant:"destructive"})}finally{f(!1)}},w=()=>{N(),x("/"),h({title:"Signed Out",description:"You have been successfully signed out."})},S=s?.full_name?s.full_name.split(" ").map(a=>a[0]).join("").toUpperCase():s?.email?.[0]?.toUpperCase()||"?";return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(k,{}),e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-12",children:e.jsxs("div",{className:"container mx-auto px-4 flex items-center gap-4",children:[e.jsx(r,{onClick:()=>x("/landlord-dashboard"),variant:"ghost",size:"icon",className:"text-white hover:bg-white/20","data-testid":"button-back",children:e.jsx(J,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold",children:"My Profile"}),e.jsx("p",{className:"text-blue-100 mt-2",children:"Manage your account and profile information"})]})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-12 flex-1 max-w-2xl",children:[e.jsx(u,{className:"p-8 mb-8 border-t-4 border-t-blue-600",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-6 pb-8 border-b",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs(A,{className:"h-24 w-24 border-2 border-blue-600",children:[s?.profile_image&&e.jsx(P,{src:s.profile_image,alt:s.full_name||"User"}),e.jsx(E,{className:"text-lg font-bold",children:S})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:s?.full_name||"Landlord User"}),e.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s?.email})]}),s?.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{children:s.phone})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Member since ",s?.created_at?new Date(s.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Recently"]})]})]}),e.jsx("div",{className:"flex gap-2 flex-shrink-0 w-full md:w-auto",children:e.jsxs(r,{onClick:w,variant:"outline",className:"flex-1 md:flex-none","data-testid":"button-logout",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Sign Out"]})})]})}),e.jsxs(u,{className:"p-8",children:[e.jsx("h3",{className:"text-xl font-bold text-foreground mb-6",children:"Edit Profile"}),e.jsx(O,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(y),className:"space-y-6",children:[e.jsx(o,{control:t.control,name:"fullName",render:({field:a})=>e.jsxs(n,{children:[e.jsxs(i,{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4"})," Full Name"]}),e.jsx(d,{children:e.jsx(p,{type:"text",placeholder:"John Doe",disabled:l,"data-testid":"input-fullname",...a})}),e.jsx(c,{})]})}),e.jsx(o,{control:t.control,name:"email",render:({field:a})=>e.jsxs(n,{children:[e.jsxs(i,{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"})," Email"]}),e.jsx(d,{children:e.jsx(p,{type:"email",placeholder:"you@example.com",disabled:!0,"data-testid":"input-email",...a})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Email cannot be changed"}),e.jsx(c,{})]})}),e.jsx(o,{control:t.control,name:"phone",render:({field:a})=>e.jsxs(n,{children:[e.jsxs(i,{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4"})," Phone Number"]}),e.jsx(d,{children:e.jsx(p,{type:"tel",placeholder:"+1 (555) 123-4567",disabled:l,"data-testid":"input-phone",...a})}),e.jsx(c,{})]})}),e.jsx(o,{control:t.control,name:"bio",render:({field:a})=>e.jsxs(n,{children:[e.jsx(i,{className:"font-semibold text-sm",children:"About You"}),e.jsx(d,{children:e.jsx(T,{placeholder:"Tell tenants about your rental philosophy or properties...",disabled:l,"data-testid":"textarea-bio",rows:4,...a})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.value?.length||0,"/500 characters"]}),e.jsx(c,{})]})}),e.jsx(r,{type:"submit",disabled:l,className:"w-full bg-blue-600 hover:bg-blue-700","data-testid":"button-save-profile",children:l?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})]})})]}),e.jsxs(u,{className:"p-8 mt-8",children:[e.jsx("h3",{className:"text-xl font-bold text-foreground mb-4",children:"Account Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:"Password"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Change your password"})]}),e.jsx(r,{variant:"outline",size:"sm",disabled:!0,"data-testid":"button-change-password",children:"Coming Soon"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage notification preferences"})]}),e.jsx(r,{variant:"outline",size:"sm",disabled:!0,"data-testid":"button-notifications",children:"Coming Soon"})]})]})]})]}),e.jsx(D,{})]})}export{ee as default};
