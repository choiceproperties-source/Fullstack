import{r as g,j as e}from"./ui-DbSH5uIw.js";import{u as N,z as b,aJ as v,y as w,N as y,c as l,C as d,O as n,B as x,M as h,at as k,al as u,V as m,K as A}from"./index-C3yA2dmm.js";import{A as C}from"./arrow-left-DiT6yHBU.js";import"./vendor-15WF5uYg.js";import"./query-C11-Me4M.js";import"./charts-DfbWf95P.js";const c={draft:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300",pending:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",under_review:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",approved:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",rejected:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",withdrawn:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300",expired:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300"};function E(){const{user:j,isLoggedIn:p}=N(),[,a]=b(),{properties:f}=v();g.useMemo(()=>{w({title:"Applications - Agent Dashboard",description:"Review and manage tenant applications for your properties"})},[]);const o=f.filter(s=>s.listingAgentId===j?.id).flatMap(s=>(s.applications||[]).map(r=>({...r,propertyId:s.id,propertyTitle:s.title,propertyAddress:`${s.city}, ${s.state}`}))),t=g.useMemo(()=>{const s={pending:[],under_review:[],approved:[],rejected:[],other:[]};return o.forEach(r=>{const i=r.status||"pending";i==="pending"||i==="under_review"||i==="approved"||i==="rejected"?s[i].push(r):s.other.push(r)}),s},[o]);return p?e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(y,{}),e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-4",children:e.jsx(l,{variant:"ghost",className:"text-white hover:bg-white/20 p-0 h-auto",onClick:()=>a("/agent-dashboard"),"data-testid":"button-back",children:e.jsx(C,{className:"h-5 w-5"})})}),e.jsx("h1",{className:"text-3xl font-bold",children:"Applications"}),e.jsxs("p",{className:"text-purple-100 mt-2",children:[o.length," total applications"]})]})}),e.jsx("div",{className:"container mx-auto px-4 py-12 flex-1",children:o.length===0?e.jsxs(d,{className:"p-12 text-center","data-testid":"empty-state",children:[e.jsx(n,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No Applications"}),e.jsx("p",{className:"text-muted-foreground",children:"No applications for your properties yet."})]}):e.jsxs("div",{className:"space-y-8",children:[t.pending.length>0&&e.jsxs("div",{"data-testid":"section-pending",children:[e.jsxs("h2",{className:"text-2xl font-bold text-foreground mb-4 flex items-center gap-2",children:[e.jsx(n,{className:"h-6 w-6"}),"Pending (",t.pending.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.pending.map(s=>e.jsxs(d,{className:"p-6","data-testid":`card-application-${s.id}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-foreground",children:s.applicantName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.propertyTitle})]}),e.jsx(x,{className:c[s.status]||c.pending,children:s.status})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(h,{className:"h-4 w-4"}),s.applicantEmail]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(k,{className:"h-4 w-4"}),s.propertyAddress]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(u,{className:"h-4 w-4"}),new Date(s.createdAt).toLocaleDateString()]})]}),e.jsxs(l,{variant:"outline",className:"w-full justify-between","data-testid":`button-review-${s.id}`,onClick:()=>a(`/applications/${s.id}`),children:[e.jsx("span",{children:"Review"}),e.jsx(m,{className:"h-4 w-4"})]})]},s.id))})]}),t.under_review.length>0&&e.jsxs("div",{"data-testid":"section-under-review",children:[e.jsxs("h2",{className:"text-2xl font-bold text-foreground mb-4 flex items-center gap-2",children:[e.jsx(n,{className:"h-6 w-6"}),"Under Review (",t.under_review.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.under_review.map(s=>e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-foreground",children:s.applicantName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.propertyTitle})]}),e.jsx(x,{className:c[s.status],children:s.status})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(h,{className:"h-4 w-4"}),s.applicantEmail]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(u,{className:"h-4 w-4"}),new Date(s.createdAt).toLocaleDateString()]})]}),e.jsxs(l,{variant:"outline",className:"w-full justify-between",onClick:()=>a(`/applications/${s.id}`),children:[e.jsx("span",{children:"View Details"}),e.jsx(m,{className:"h-4 w-4"})]})]},s.id))})]}),t.approved.length>0&&e.jsxs("div",{"data-testid":"section-approved",children:[e.jsxs("h2",{className:"text-2xl font-bold text-foreground mb-4 flex items-center gap-2",children:[e.jsx(n,{className:"h-6 w-6"}),"Approved (",t.approved.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.approved.map(s=>e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-foreground",children:s.applicantName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.propertyTitle})]}),e.jsx(x,{className:c[s.status],children:s.status})]}),e.jsxs(l,{variant:"outline",className:"w-full justify-between",onClick:()=>a(`/applications/${s.id}`),children:[e.jsx("span",{children:"View Details"}),e.jsx(m,{className:"h-4 w-4"})]})]},s.id))})]}),t.rejected.length>0&&e.jsxs("div",{"data-testid":"section-rejected",children:[e.jsxs("h2",{className:"text-2xl font-bold text-foreground mb-4 flex items-center gap-2",children:[e.jsx(n,{className:"h-6 w-6"}),"Rejected (",t.rejected.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.rejected.map(s=>e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-foreground",children:s.applicantName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.propertyTitle})]}),e.jsx(x,{className:c[s.status],children:s.status})]}),e.jsxs(l,{variant:"outline",className:"w-full justify-between",onClick:()=>a(`/applications/${s.id}`),children:[e.jsx("span",{children:"View Details"}),e.jsx(m,{className:"h-4 w-4"})]})]},s.id))})]})]})}),e.jsx(A,{})]}):(a("/login"),null)}export{E as default};
