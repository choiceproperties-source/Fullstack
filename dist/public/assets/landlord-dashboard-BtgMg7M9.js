import{r as u,j as e}from"./ui-DbSH5uIw.js";import{u as R,z as P,y as M,N as g,K as j,c as r,ar as C,C as a,aa as D,ah as O,Z as S,B as T,O as b,ai as B,a1 as z,V as x}from"./index-C3yA2dmm.js";import{u as F}from"./use-owned-properties-DTz-5PDv.js";import{u as $}from"./use-property-applications-CwVe8zV7.js";import{P as E}from"./progress-BHXBwQCL.js";import{L as V}from"./dashboard-skeleton-qKk3-62f.js";import"./vendor-15WF5uYg.js";import"./query-C11-Me4M.js";import"./charts-DfbWf95P.js";function G(){const{user:l,logout:f,isLoggedIn:N}=R(),[,i]=P(),{properties:m,loading:v}=F(),{applications:h,isLoading:w}=$();u.useMemo(()=>{M({title:"Landlord Dashboard - Choice Properties",description:"Manage your properties and rental applications",image:"https://choiceproperties.com/og-image.png",url:"https://choiceproperties.com/landlord-dashboard"})},[]);const s=u.useMemo(()=>{const n=m||[],o=h||[],y=n.filter(t=>t.status==="active"),d=n.filter(t=>t.status==="rented"),c=n.length,k=c>0?Math.round(d.length/c*100):0,L=d.reduce((t,p)=>t+(p.price||0),0),A=n.reduce((t,p)=>t+(p.price||0),0);return{properties:c,activeListings:y.length,rentedProperties:d.length,applications:o.length,approvedApps:o.filter(t=>t.status==="approved").length,pendingApps:o.filter(t=>t.status==="pending").length,occupancyRate:k,monthlyRevenue:L,potentialRevenue:A}},[m,h]);return!N||!l||l.role!=="landlord"&&l.role!=="property_manager"&&l.role!=="admin"?(i("/login"),null):v||w?e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(g,{}),e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Landlord Dashboard"}),e.jsx("p",{className:"text-blue-100 mt-2",children:"Manage your properties and applications"})]})}),e.jsx(V,{}),e.jsx(j,{})]}):e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(g,{}),e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-12",children:e.jsxs("div",{className:"container mx-auto px-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Landlord Dashboard"}),e.jsx("p",{className:"text-blue-100 mt-2",children:"Manage your properties and applications"})]}),e.jsxs(r,{onClick:()=>{f(),i("/")},variant:"ghost",className:"text-white hover:bg-white/20","data-testid":"button-logout",children:[e.jsx(C,{className:"h-5 w-5 mr-2"}),"Sign Out"]})]})}),e.jsx("div",{className:"container mx-auto px-4 -mt-8 relative z-10 pb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(a,{className:"p-6","data-testid":"stat-properties",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-muted-foreground",children:"Total Properties"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mt-2",children:s.properties}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.activeListings," active • ",s.rentedProperties," rented"]})]}),e.jsx(D,{className:"h-8 w-8 text-blue-500 opacity-20"})]})}),e.jsx(a,{className:"p-6","data-testid":"stat-occupancy",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("p",{className:"text-sm font-semibold text-muted-foreground",children:"Occupancy Rate"}),e.jsx("p",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400 mt-2",children:s.properties>0?`${s.occupancyRate}%`:"--"}),s.properties>0?e.jsx(E,{value:s.occupancyRate,className:"h-1.5 mt-2"}):e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Add properties to track"})]}),e.jsx(O,{className:"h-8 w-8 text-emerald-500 opacity-20 flex-shrink-0 ml-2"})]})}),e.jsx(a,{className:"p-6","data-testid":"stat-revenue",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-muted-foreground",children:"Monthly Revenue"}),e.jsxs("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-2",children:["$",s.monthlyRevenue.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["$",s.potentialRevenue.toLocaleString()," potential"]})]}),e.jsx(S,{className:"h-8 w-8 text-green-500 opacity-20"})]})}),e.jsx(a,{className:"p-6","data-testid":"stat-applications",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-muted-foreground",children:"Applications"}),e.jsx("p",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400 mt-2",children:s.applications}),e.jsx("div",{className:"flex gap-2 mt-1",children:s.pendingApps>0&&e.jsxs(T,{variant:"outline",className:"text-xs bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300 border-yellow-300 dark:border-yellow-700",children:[s.pendingApps," pending"]})})]}),e.jsx(b,{className:"h-8 w-8 text-indigo-500 opacity-20"})]})})]})}),s.pendingApps>0&&e.jsx("div",{className:"container mx-auto px-4 mb-8","data-testid":"pending-alert",children:e.jsx(a,{className:"border-l-4 border-l-amber-500 bg-amber-50 dark:bg-amber-900/20",children:e.jsxs("div",{className:"p-4 flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-amber-800 dark:text-amber-200",children:[s.pendingApps," Application",s.pendingApps>1?"s":""," Awaiting Review"]}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"Review pending applications to keep tenants engaged"})]})]}),e.jsx(r,{onClick:()=>i("/landlord-applications"),size:"sm",className:"bg-amber-600 hover:bg-amber-700 text-white","data-testid":"button-review-applications",children:"Review Now"})]})})}),e.jsx("div",{className:"container mx-auto px-4 flex-1 pb-12",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(a,{className:"p-8","data-testid":"section-quick-actions",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-6",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(r,{onClick:()=>i("/landlord-properties"),className:"w-full justify-between bg-blue-600 hover:bg-blue-700","data-testid":"button-manage-properties",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"Manage Properties"]}),e.jsx(x,{className:"h-4 w-4"})]}),e.jsxs(r,{onClick:()=>i("/landlord-applications"),className:"w-full justify-between bg-indigo-600 hover:bg-indigo-700","data-testid":"button-view-applications",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),"View Applications"]}),e.jsx(x,{className:"h-4 w-4"})]}),e.jsxs(r,{onClick:()=>i("/landlord-profile"),variant:"outline",className:"w-full justify-between","data-testid":"button-profile",children:[e.jsx("span",{children:"My Profile"}),e.jsx(x,{className:"h-4 w-4"})]})]})]}),e.jsxs(a,{className:"p-8","data-testid":"section-overview",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-6",children:"Overview"}),e.jsxs("div",{className:"space-y-4 text-sm text-muted-foreground",children:[e.jsx("p",{children:"Welcome to your landlord dashboard! From here you can manage all your properties, review tenant applications, and handle your rental business."}),e.jsx("p",{children:"• Add new properties to attract tenants • Review and approve/reject applications • Track all active listings and applications"}),e.jsxs("p",{className:"text-xs text-muted-foreground italic mt-4",children:["Last updated: ",new Date().toLocaleDateString()]})]})]})]})}),e.jsx(j,{})]})}export{G as default};
