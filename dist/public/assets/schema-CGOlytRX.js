import{B as Ze,D as Ge,E as Xe,I as Je,N as He,O as We,P as Ye,Z as ee,a as ke,c as et,d as tt,f as rt,g as it,h as nt,i as at,j as st,k as ot,l as ce,m as dt,n as ut,p as lt,q as ct,r as pt,u as mt,v as ft,w as gt,x as yt,y as _t,z as ht,A as bt,C as Nt,F as At,G as Pt,H as wt,J as St,K as It,L as Tt,M as Dt,Q as vt,R as Bt,S as xt,T as Ct,U as qt,V as Vt,W as Ft,X as Mt,Y as zt,_ as Lt,$ as Ut,a0 as J,a1 as Z,a2 as Et,b as E,a3 as U,a4 as Ne,a5 as $t,a6 as jt,a7 as Qt,a8 as Kt,a9 as pe,e as W,aa as Ot,ab as Rt,ac as Zt,ad as Gt,ae as Xt,af as Jt,ag as Ht,ah as Wt,ai as Yt,aj as kt,ak as er,al as Ae,am as tr,an as rr,ao as ir,ap as nr,aq as ar,ar as Pe,as as sr,at as O,o as B,au as or,av as dr,aw as ur,ax as lr,ay as cr,az as pr,aA as mr,aB as fr,aC as gr,aD as we,aE as yr,aF as _r,aG as hr,s as g,aH as br,aI as Nr,aJ as Ar,aK as de,aL as Pr,aM as wr,aN as Sr}from"./types-CF7YDNpg.js";const Ir=Object.freeze(Object.defineProperty({__proto__:null,BRAND:Ze,DIRTY:Ge,EMPTY_PATH:Xe,INVALID:Je,NEVER:He,OK:We,ParseStatus:Ye,Schema:ee,ZodAny:ke,ZodArray:et,ZodBigInt:tt,ZodBoolean:rt,ZodBranded:it,ZodCatch:nt,ZodDate:at,ZodDefault:st,ZodDiscriminatedUnion:ot,ZodEffects:ce,ZodEnum:dt,ZodError:ut,get ZodFirstPartyTypeKind(){return lt},ZodFunction:ct,ZodIntersection:pt,ZodIssueCode:mt,ZodLazy:ft,ZodLiteral:gt,ZodMap:yt,ZodNaN:_t,ZodNativeEnum:ht,ZodNever:bt,ZodNull:Nt,ZodNullable:At,ZodNumber:Pt,ZodObject:wt,ZodOptional:St,ZodParsedType:It,ZodPipeline:Tt,ZodPromise:Dt,ZodReadonly:vt,ZodRecord:Bt,ZodSchema:ee,ZodSet:xt,ZodString:Ct,ZodSymbol:qt,ZodTransformer:ce,ZodTuple:Vt,ZodType:ee,ZodUndefined:Ft,ZodUnion:Mt,ZodUnknown:zt,ZodVoid:Lt,addIssueToContext:Ut,any:J,array:Z,bigint:Et,boolean:E,coerce:U,custom:Ne,date:$t,datetimeRegex:jt,defaultErrorMap:Qt,discriminatedUnion:Kt,effect:pe,enum:W,function:Ot,getErrorMap:Rt,getParsedType:Zt,instanceof:Gt,intersection:Xt,isAborted:Jt,isAsync:Ht,isDirty:Wt,isValid:Yt,late:kt,lazy:er,literal:Ae,makeIssue:tr,map:rr,nan:ir,nativeEnum:nr,never:ar,null:Pe,nullable:sr,number:O,object:B,get objectUtil(){return or},oboolean:dr,onumber:ur,optional:lr,ostring:cr,pipeline:pr,preprocess:mr,promise:fr,quotelessJson:gr,record:we,set:yr,setErrorMap:_r,strictObject:hr,string:g,symbol:br,transformer:pe,tuple:Nr,undefined:Ar,union:de,unknown:Pr,get util(){return wr},void:Sr},Symbol.toStringTag,{value:"Module"})),o=Symbol.for("drizzle:entityKind");function V(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,o))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(o in r&&r[o]===e[o])return!0;r=Object.getPrototypeOf(r)}return!1}class R{constructor(e,r){this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}static[o]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}class Tr{static[o]="ColumnBuilder";config;constructor(e,r,i){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:i,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}const j=Symbol.for("drizzle:Name");class Dr{static[o]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,r){this.reference=()=>{const{name:i,columns:d,foreignColumns:u}=e();return{name:i,columns:d,foreignTable:u[0].table,foreignColumns:u}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new vr(e,this)}}class vr{constructor(e,r){this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}static[o]="PgForeignKey";reference;onUpdate;onDelete;getName(){const{name:e,columns:r,foreignColumns:i}=this.reference(),d=r.map(A=>A.name),u=i.map(A=>A.name),p=[this.table[j],...d,i[0].table[j],...u];return e??`${p.join("_")}_fk`}}function Br(t,...e){return t(...e)}function K(t){return new Cr(t)}function Se(t,e){return`${t[j]}_${e.join("_")}_unique`}class xr{constructor(e,r){this.name=r,this.columns=e}static[o]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new qr(e,this.columns,this.nullsNotDistinctConfig,this.name)}}class Cr{static[o]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new xr(e,this.name)}}class qr{constructor(e,r,i,d){this.table=e,this.columns=r,this.name=d??Se(this.table,this.columns.map(u=>u.name)),this.nullsNotDistinct=i}static[o]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}function me(t,e,r){for(let i=e;i<t.length;i++){const d=t[i];if(d==="\\"){i++;continue}if(d==='"')return[t.slice(e,i).replace(/\\/g,""),i+1];if(!r&&(d===","||d==="}"))return[t.slice(e,i).replace(/\\/g,""),i]}return[t.slice(e).replace(/\\/g,""),t.length]}function Ie(t,e=0){const r=[];let i=e,d=!1;for(;i<t.length;){const u=t[i];if(u===","){(d||i===e)&&r.push(""),d=!0,i++;continue}if(d=!1,u==="\\"){i+=2;continue}if(u==='"'){const[P,T]=me(t,i+1,!0);r.push(P),i=T;continue}if(u==="}")return[r,i+1];if(u==="{"){const[P,T]=Ie(t,i+1);r.push(P),i=T;continue}const[p,A]=me(t,i,!1);r.push(p),i=A}return[r,i]}function Vr(t){const[e]=Ie(t,1);return e}function Te(t){return`{${t.map(e=>Array.isArray(e)?Te(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}class b extends Tr{foreignKeyConfigs=[];static[o]="PgColumnBuilder";array(e){return new Mr(this.config.name,this,e)}references(e,r={}){return this.foreignKeyConfigs.push({ref:e,actions:r}),this}unique(e,r){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=r?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,r){return this.foreignKeyConfigs.map(({ref:i,actions:d})=>Br((u,p)=>{const A=new Dr(()=>{const P=u();return{columns:[e],foreignColumns:[P]}});return p.onUpdate&&A.onUpdate(p.onUpdate),p.onDelete&&A.onDelete(p.onDelete),A.build(r)},i,d))}buildExtraConfigColumn(e){return new Fr(e,this.config)}}class _ extends R{constructor(e,r){r.uniqueName||(r.uniqueName=Se(e,[r.name])),super(e,r),this.table=e}static[o]="PgColumn"}class Fr extends _{static[o]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class Mr extends b{static[o]="PgArrayBuilder";constructor(e,r,i){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=i}build(e){const r=this.config.baseBuilder.build(e);return new ue(e,this.config,r)}}class ue extends _{constructor(e,r,i,d){super(e,r),this.baseColumn=i,this.range=d,this.size=r.size}size;static[o]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=Vr(e)),e.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(e,r=!1){const i=e.map(d=>d===null?null:V(this.baseColumn,ue)?this.baseColumn.mapToDriverValue(d,!0):this.baseColumn.mapToDriverValue(d));return r?i:Te(i)}}const fe=Symbol.for("drizzle:isPgEnum");function zr(t){return!!t&&typeof t=="function"&&fe in t&&t[fe]===!0}class De{static[o]="Subquery";constructor(e,r,i,d=!1){this._={brand:"Subquery",sql:e,selectedFields:r,alias:i,isWith:d}}}const Lr={startActiveSpan(t,e){return e()}},Q=Symbol.for("drizzle:ViewBaseConfig"),te=Symbol.for("drizzle:Schema"),ge=Symbol.for("drizzle:Columns"),ye=Symbol.for("drizzle:ExtraConfigColumns"),re=Symbol.for("drizzle:OriginalName"),ie=Symbol.for("drizzle:BaseName"),H=Symbol.for("drizzle:IsAlias"),_e=Symbol.for("drizzle:ExtraConfigBuilder"),ve=Symbol.for("drizzle:IsDrizzleTable");class z{static[o]="Table";static Symbol={Name:j,Schema:te,OriginalName:re,Columns:ge,ExtraConfigColumns:ye,BaseName:ie,IsAlias:H,ExtraConfigBuilder:_e};[j];[re];[te];[ge];[ye];[ie];[H]=!1;[ve]=!0;[_e]=void 0;constructor(e,r,i){this[j]=this[re]=e,this[te]=r,this[ie]=i}}function Be(t){return typeof t=="object"&&t!==null&&ve in t}function Ur(t){return t!=null&&typeof t.getSQL=="function"}function Er(t){const e={sql:"",params:[]};for(const r of t)e.sql+=r.sql,e.params.push(...r.params),r.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}class L{static[o]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new x([this])}}class x{constructor(e){this.queryChunks=e}static[o]="SQL";decoder=xe;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Lr.startActiveSpan("drizzle.buildSQL",r=>{const i=this.buildQueryFromSourceParams(this.queryChunks,e);return r?.setAttributes({"drizzle.query.text":i.sql,"drizzle.query.params":JSON.stringify(i.params)}),i})}buildQueryFromSourceParams(e,r){const i=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:d,escapeName:u,escapeParam:p,prepareTyping:A,inlineParams:P,paramStartIndex:T}=i;return Er(e.map(l=>{if(V(l,L))return{sql:l.value.join(""),params:[]};if(V(l,ae))return{sql:u(l.value),params:[]};if(l===void 0)return{sql:"",params:[]};if(Array.isArray(l)){const S=[new L("(")];for(const[v,$]of l.entries())S.push($),v<l.length-1&&S.push(new L(", "));return S.push(new L(")")),this.buildQueryFromSourceParams(S,i)}if(V(l,x))return this.buildQueryFromSourceParams(l.queryChunks,{...i,inlineParams:P||l.shouldInlineParams});if(V(l,z)){const S=l[z.Symbol.Schema],v=l[z.Symbol.Name];return{sql:S===void 0||l[H]?u(v):u(S)+"."+u(v),params:[]}}if(V(l,R)){const S=d.getColumnCasing(l);if(r.invokeSource==="indexes")return{sql:u(S),params:[]};const v=l.table[z.Symbol.Schema];return{sql:l.table[H]||v===void 0?u(l.table[z.Symbol.Name])+"."+u(S):u(v)+"."+u(l.table[z.Symbol.Name])+"."+u(S),params:[]}}if(V(l,$r)){const S=l[Q].schema,v=l[Q].name;return{sql:S===void 0||l[Q].isAlias?u(v):u(S)+"."+u(v),params:[]}}if(V(l,qe)){if(V(l.value,se))return{sql:p(T.value++,l),params:[l],typings:["none"]};const S=l.value===null?null:l.encoder.mapToDriverValue(l.value);if(V(S,x))return this.buildQueryFromSourceParams([S],i);if(P)return{sql:this.mapInlineParam(S,i),params:[]};let v=["none"];return A&&(v=[A(l.encoder)]),{sql:p(T.value++,S),params:[S],typings:v}}return V(l,se)?{sql:p(T.value++,l),params:[l],typings:["none"]}:V(l,x.Aliased)&&l.fieldAlias!==void 0?{sql:u(l.fieldAlias),params:[]}:V(l,De)?l._.isWith?{sql:u(l._.alias),params:[]}:this.buildQueryFromSourceParams([new L("("),l._.sql,new L(") "),new ae(l._.alias)],i):zr(l)?l.schema?{sql:u(l.schema)+"."+u(l.enumName),params:[]}:{sql:u(l.enumName),params:[]}:Ur(l)?l.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([l.getSQL()],i):this.buildQueryFromSourceParams([new L("("),l.getSQL(),new L(")")],i):P?{sql:this.mapInlineParam(l,i),params:[]}:{sql:p(T.value++,l),params:[l],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){const i=e.toString();return r(i==="[object Object]"?JSON.stringify(e):i)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new x.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class ae{constructor(e){this.value=e}static[o]="Name";brand;getSQL(){return new x([this])}}const xe={mapFromDriverValue:t=>t},Ce={mapToDriverValue:t=>t};({...xe,...Ce});class qe{constructor(e,r=Ce){this.value=e,this.encoder=r}static[o]="Param";brand;getSQL(){return new x([this])}}function m(t,...e){const r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new L(t[0]));for(const[i,d]of e.entries())r.push(d,new L(t[i+1]));return new x(r)}(t=>{function e(){return new x([])}t.empty=e;function r(P){return new x(P)}t.fromList=r;function i(P){return new x([new L(P)])}t.raw=i;function d(P,T){const l=[];for(const[S,v]of P.entries())S>0&&T!==void 0&&l.push(T),l.push(v);return new x(l)}t.join=d;function u(P){return new ae(P)}t.identifier=u;function p(P){return new se(P)}t.placeholder=p;function A(P,T){return new qe(P,T)}t.param=A})(m||(m={}));(t=>{class e{constructor(i,d){this.sql=i,this.fieldAlias=d}static[o]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}t.Aliased=e})(x||(x={}));class se{constructor(e){this.name=e}static[o]="Placeholder";getSQL(){return new x([this])}}const Ve=Symbol.for("drizzle:IsDrizzleView");class $r{static[o]="View";[Q];[Ve]=!0;constructor({name:e,schema:r,selectedFields:i,query:d}){this[Q]={name:e,originalName:e,schema:r,selectedFields:i,query:d,isExisting:!d,isAlias:!1}}getSQL(){return new x([this])}}function jr(t){return typeof t=="object"&&t!==null&&Ve in t}R.prototype.getSQL=function(){return new x([this])};z.prototype.getSQL=function(){return new x([this])};De.prototype.getSQL=function(){return new x([this])};function Qr(t){return t[z.Symbol.Columns]}function Kr(t){return t[Q].selectedFields}function q(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}class Y extends b{static[o]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){const{name:r,...i}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:i}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:r,...i}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:i}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class Or extends Y{static[o]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new Rr(e,this.config)}}class Rr extends _{static[o]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class Zr extends Y{static[o]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Gr(e,this.config)}}class Gr extends _{static[o]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function Xr(t,e){const{name:r,config:i}=q(t,e);return i.mode==="number"?new Or(r):new Zr(r)}class Jr extends b{static[o]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Hr(e,this.config)}}class Hr extends _{static[o]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class Wr extends b{static[o]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Yr(e,this.config)}}class Yr extends _{static[o]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function kr(t,e){const{name:r,config:i}=q(t,e);return i.mode==="number"?new Jr(r):new Wr(r)}class ei extends b{static[o]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new ti(e,this.config)}}class ti extends _{static[o]="PgBoolean";getSQLType(){return"boolean"}}function N(t){return new ei(t??"")}class ri extends b{static[o]="PgCharBuilder";constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new ii(e,this.config)}}class ii extends _{static[o]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}function ni(t,e={}){const{name:r,config:i}=q(t,e);return new ri(r,i)}class ai extends b{static[o]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new si(e,this.config)}}class si extends _{static[o]="PgCidr";getSQLType(){return"cidr"}}function oi(t){return new ai(t??"")}class di extends b{static[o]="PgCustomColumnBuilder";constructor(e,r,i){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=i}build(e){return new ui(e,this.config)}}class ui extends _{static[o]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,r){super(e,r),this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}}function li(t){return(e,r)=>{const{name:i,config:d}=q(e,r);return new di(i,d,t)}}class G extends b{static[o]="PgDateColumnBaseBuilder";defaultNow(){return this.default(m`now()`)}}class ci extends G{static[o]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new pi(e,this.config)}}class pi extends _{static[o]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class mi extends G{static[o]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new fi(e,this.config)}}class fi extends _{static[o]="PgDateString";getSQLType(){return"date"}}function k(t,e){const{name:r,config:i}=q(t,e);return i?.mode==="date"?new ci(r):new mi(r)}class gi extends b{static[o]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new yi(e,this.config)}}class yi extends _{static[o]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}function _i(t){return new gi(t??"")}class hi extends b{static[o]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new bi(e,this.config)}}class bi extends _{static[o]="PgInet";getSQLType(){return"inet"}}function Ni(t){return new hi(t??"")}class Ai extends Y{static[o]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new Pi(e,this.config)}}class Pi extends _{static[o]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}function I(t){return new Ai(t??"")}class wi extends b{static[o]="PgIntervalBuilder";constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new Si(e,this.config)}}class Si extends _{static[o]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){const e=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${e}${r}`}}function Ii(t,e={}){const{name:r,config:i}=q(t,e);return new wi(r,i)}class Ti extends b{static[o]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new Di(e,this.config)}}class Di extends _{static[o]="PgJson";constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function vi(t){return new Ti(t??"")}class Bi extends b{static[o]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new xi(e,this.config)}}class xi extends _{static[o]="PgJsonb";constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function f(t){return new Bi(t??"")}class Ci extends b{static[o]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new qi(e,this.config)}}class qi extends _{static[o]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){const[r,i,d]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(i),Number.parseFloat(d)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class Vi extends b{static[o]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new Fi(e,this.config)}}class Fi extends _{static[o]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){const[r,i,d]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(i),c:Number.parseFloat(d)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function Mi(t,e){const{name:r,config:i}=q(t,e);return!i?.mode||i.mode==="tuple"?new Ci(r):new Vi(r)}class zi extends b{static[o]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new Li(e,this.config)}}class Li extends _{static[o]="PgMacaddr";getSQLType(){return"macaddr"}}function Ui(t){return new zi(t??"")}class Ei extends b{static[o]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new $i(e,this.config)}}class $i extends _{static[o]="PgMacaddr8";getSQLType(){return"macaddr8"}}function ji(t){return new Ei(t??"")}class Qi extends b{static[o]="PgNumericBuilder";constructor(e,r,i){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=i}build(e){return new Ki(e,this.config)}}class Ki extends _{static[o]="PgNumeric";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}function Fe(t,e){const{name:r,config:i}=q(t,e);return new Qi(r,i?.precision,i?.scale)}const w=Fe;class Oi extends b{static[o]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new Ri(e,this.config)}}class Ri extends _{static[o]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,i]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(i)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class Zi extends b{static[o]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new Gi(e,this.config)}}class Gi extends _{static[o]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,i]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(i)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function Xi(t,e){const{name:r,config:i}=q(t,e);return!i?.mode||i.mode==="tuple"?new Oi(r):new Zi(r)}function Ji(t){const e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function he(t,e){const r=new ArrayBuffer(8),i=new DataView(r);for(let d=0;d<8;d++)i.setUint8(d,t[e+d]);return i.getFloat64(0,!0)}function Me(t){const e=Ji(t);let r=0;const i=e[r];r+=1;const d=new DataView(e.buffer),u=d.getUint32(r,i===1);if(r+=4,u&536870912&&(d.getUint32(r,i===1),r+=4),(u&65535)===1){const p=he(e,r);r+=8;const A=he(e,r);return r+=8,[p,A]}throw new Error("Unsupported geometry type")}class Hi extends b{static[o]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new Wi(e,this.config)}}class Wi extends _{static[o]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return Me(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class Yi extends b{static[o]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new ki(e,this.config)}}class ki extends _{static[o]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const r=Me(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function en(t,e){const{name:r,config:i}=q(t,e);return!i?.mode||i.mode==="tuple"?new Hi(r):new Yi(r)}class tn extends b{static[o]="PgRealBuilder";constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new rn(e,this.config)}}class rn extends _{static[o]="PgReal";constructor(e,r){super(e,r)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e}function nn(t){return new tn(t??"")}class an extends b{static[o]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new sn(e,this.config)}}class sn extends _{static[o]="PgSerial";getSQLType(){return"serial"}}function on(t){return new an(t??"")}class dn extends Y{static[o]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new un(e,this.config)}}class un extends _{static[o]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e}function ln(t){return new dn(t??"")}class cn extends b{static[o]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new pn(e,this.config)}}class pn extends _{static[o]="PgSmallSerial";getSQLType(){return"smallserial"}}function mn(t){return new cn(t??"")}class fn extends b{static[o]="PgTextBuilder";constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new gn(e,this.config)}}class gn extends _{static[o]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function n(t,e={}){const{name:r,config:i}=q(t,e);return new fn(r,i)}class yn extends G{constructor(e,r,i){super(e,"string","PgTime"),this.withTimezone=r,this.precision=i,this.config.withTimezone=r,this.config.precision=i}static[o]="PgTimeBuilder";build(e){return new _n(e,this.config)}}class _n extends _{static[o]="PgTime";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function hn(t,e={}){const{name:r,config:i}=q(t,e);return new yn(r,i.withTimezone??!1,i.precision)}class bn extends G{static[o]="PgTimestampBuilder";constructor(e,r,i){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=i}build(e){return new Nn(e,this.config)}}class Nn extends _{static[o]="PgTimestamp";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()}class An extends G{static[o]="PgTimestampStringBuilder";constructor(e,r,i){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=i}build(e){return new Pn(e,this.config)}}class Pn extends _{static[o]="PgTimestampString";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function s(t,e={}){const{name:r,config:i}=q(t,e);return i?.mode==="string"?new An(r,i.withTimezone??!1,i.precision):new bn(r,i?.withTimezone??!1,i?.precision)}class wn extends b{static[o]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(m`gen_random_uuid()`)}build(e){return new Sn(e,this.config)}}class Sn extends _{static[o]="PgUUID";getSQLType(){return"uuid"}}function a(t){return new wn(t??"")}class In extends b{static[o]="PgVarcharBuilder";constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new Tn(e,this.config)}}class Tn extends _{static[o]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}function Dn(t,e={}){const{name:r,config:i}=q(t,e);return new In(r,i)}class vn extends b{static[o]="PgBinaryVectorBuilder";constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new Bn(e,this.config)}}class Bn extends _{static[o]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function xn(t,e){const{name:r,config:i}=q(t,e);return new vn(r,i)}class Cn extends b{static[o]="PgHalfVectorBuilder";constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new qn(e,this.config)}}class qn extends _{static[o]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}function Vn(t,e){const{name:r,config:i}=q(t,e);return new Cn(r,i)}class Fn extends b{static[o]="PgSparseVectorBuilder";constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new Mn(e,this.config)}}class Mn extends _{static[o]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function zn(t,e){const{name:r,config:i}=q(t,e);return new Fn(r,i)}class Ln extends b{static[o]="PgVectorBuilder";constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new Un(e,this.config)}}class Un extends _{static[o]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}function En(t,e){const{name:r,config:i}=q(t,e);return new Ln(r,i)}function $n(){return{bigint:Xr,bigserial:kr,boolean:N,char:ni,cidr:oi,customType:li,date:k,doublePrecision:_i,inet:Ni,integer:I,interval:Ii,json:vi,jsonb:f,line:Mi,macaddr:Ui,macaddr8:ji,numeric:Fe,point:Xi,geometry:en,real:nn,serial:on,smallint:ln,smallserial:mn,text:n,time:hn,timestamp:s,uuid:a,varchar:Dn,bit:xn,halfvec:Vn,sparsevec:zn,vector:En}}const oe=Symbol.for("drizzle:PgInlineForeignKeys"),be=Symbol.for("drizzle:EnableRLS");class ne extends z{static[o]="PgTable";static Symbol=Object.assign({},z.Symbol,{InlineForeignKeys:oe,EnableRLS:be});[oe]=[];[be]=!1;[z.Symbol.ExtraConfigBuilder]=void 0}function jn(t,e,r,i,d=t){const u=new ne(t,i,d),p=typeof e=="function"?e($n()):e,A=Object.fromEntries(Object.entries(p).map(([l,S])=>{const v=S;v.setName(l);const $=v.build(u);return u[oe].push(...v.buildForeignKeys($,u)),[l,$]})),P=Object.fromEntries(Object.entries(p).map(([l,S])=>{const v=S;v.setName(l);const $=v.buildExtraConfigColumn(u);return[l,$]})),T=Object.assign(u,A);return T[z.Symbol.Columns]=A,T[z.Symbol.ExtraConfigColumns]=P,r&&(T[ne.Symbol.ExtraConfigBuilder]=r),Object.assign(T,{enableRLS:()=>(T[ne.Symbol.EnableRLS]=!0,T)})}const y=(t,e,r)=>jn(t,e,r,void 0),D={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function C(t,e){return e.includes(t.columnType)}function Qn(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const Kn=de([g(),O(),E(),Pe()]),On=de([Kn,we(J()),Z(J())]),Rn=Ne(t=>t instanceof Buffer);function ze(t,e){const r=e?.zodInstance??Ir,i=e?.coerce??{};let d;return Qn(t)&&(d=t.enumValues.length?r.enum(t.enumValues):r.string()),d||(C(t,["PgGeometry","PgPointTuple"])?d=r.tuple([r.number(),r.number()]):C(t,["PgGeometryObject","PgPointObject"])?d=r.object({x:r.number(),y:r.number()}):C(t,["PgHalfVector","PgVector"])?(d=r.array(r.number()),d=t.dimensions?d.length(t.dimensions):d):C(t,["PgLine"])?d=r.tuple([r.number(),r.number(),r.number()]):C(t,["PgLineABC"])?d=r.object({a:r.number(),b:r.number(),c:r.number()}):C(t,["PgArray"])?(d=r.array(ze(t.baseColumn,r)),d=t.size?d.length(t.size):d):t.dataType==="array"?d=r.array(r.any()):t.dataType==="number"?d=Zn(t,r,i):t.dataType==="bigint"?d=Gn(t,r,i):t.dataType==="boolean"?d=i===!0||i.boolean?r.coerce.boolean():r.boolean():t.dataType==="date"?d=i===!0||i.date?r.coerce.date():r.date():t.dataType==="string"?d=Xn(t,r,i):t.dataType==="json"?d=On:t.dataType==="custom"?d=r.any():t.dataType==="buffer"&&(d=Rn)),d||(d=r.any()),d}function Zn(t,e,r){let i=t.getSQLType().includes("unsigned"),d,u,p=!1;C(t,["MySqlTinyInt","SingleStoreTinyInt"])?(d=i?0:D.INT8_MIN,u=i?D.INT8_UNSIGNED_MAX:D.INT8_MAX,p=!0):C(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(d=i?0:D.INT16_MIN,u=i?D.INT16_UNSIGNED_MAX:D.INT16_MAX,p=!0):C(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(d=i?0:D.INT24_MIN,u=i?D.INT24_UNSIGNED_MAX:D.INT24_MAX,p=C(t,["MySqlMediumInt","SingleStoreMediumInt"])):C(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(d=i?0:D.INT32_MIN,u=i?D.INT32_UNSIGNED_MAX:D.INT32_MAX,p=!0):C(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(d=i?0:D.INT48_MIN,u=i?D.INT48_UNSIGNED_MAX:D.INT48_MAX):C(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(i=i||C(t,["MySqlSerial","SingleStoreSerial"]),d=i?0:Number.MIN_SAFE_INTEGER,u=Number.MAX_SAFE_INTEGER,p=!0):C(t,["MySqlYear","SingleStoreYear"])?(d=1901,u=2155,p=!0):(d=Number.MIN_SAFE_INTEGER,u=Number.MAX_SAFE_INTEGER);let A=r===!0||r?.number?e.coerce.number():e.number();return A=A.min(d).max(u),p?A.int():A}function Gn(t,e,r){const i=t.getSQLType().includes("unsigned"),d=i?0n:D.INT64_MIN,u=i?D.INT64_UNSIGNED_MAX:D.INT64_MAX;return(r===!0||r?.bigint?e.coerce.bigint():e.bigint()).min(d).max(u)}function Xn(t,e,r){if(C(t,["PgUUID"]))return e.string().uuid();let i,d,u=!1;C(t,["PgVarchar","SQLiteText"])?i=t.length:C(t,["MySqlVarChar","SingleStoreVarChar"])?i=t.length??D.INT16_UNSIGNED_MAX:C(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?i=D.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?i=D.INT24_UNSIGNED_MAX:t.textType==="text"?i=D.INT16_UNSIGNED_MAX:i=D.INT8_UNSIGNED_MAX),C(t,["PgChar","MySqlChar","SingleStoreChar"])&&(i=t.length,u=!0),C(t,["PgBinaryVector"])&&(d=/^[01]+$/,i=t.dimensions);let p=r===!0||r?.string?e.coerce.string():e.string();return p=d?p.regex(d):p,i&&u?p.length(i):i?p.max(i):p}function Le(t){return Be(t)?Qr(t):Kr(t)}function Ue(t,e,r,i){const d={};for(const[u,p]of Object.entries(t)){if(!V(p,R)&&!V(p,x)&&!V(p,x.Aliased)&&typeof p=="object"){const S=Be(p)||jr(p)?Le(p):p;d[u]=Ue(S,e[u]??{},r,i);continue}const A=e[u];if(A!==void 0&&typeof A!="function"){d[u]=A;continue}const P=V(p,R)?p:void 0,T=P?ze(P,i):J(),l=typeof A=="function"?A(T):T;r.never(P)||(d[u]=l,P&&(r.nullable(P)&&(d[u]=d[u].nullable()),r.optional(P)&&(d[u]=d[u].optional())))}return B(d)}const Jn={never:t=>t?.generated?.type==="always"||t?.generatedIdentity?.type==="always",optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},h=(t,e)=>{const r=Le(t);return Ue(r,e??{},Jn)},X=y("agencies",{id:a("id").primaryKey().default(m`gen_random_uuid()`),name:n("name").notNull(),description:n("description"),logo:n("logo"),website:n("website"),email:n("email"),phone:n("phone"),address:n("address"),city:n("city"),state:n("state"),zipCode:n("zip_code"),licenseNumber:n("license_number"),licenseExpiry:k("license_expiry"),commissionRate:w("commission_rate",{precision:5,scale:2}),status:n("status").default("active"),ownerId:a("owner_id"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow(),deletedAt:s("deleted_at")}),c=y("users",{id:a("id").primaryKey().default(m`gen_random_uuid()`),email:n("email").notNull().unique(),passwordHash:n("password_hash"),fullName:n("full_name"),phone:n("phone"),role:n("role").default("renter"),profileImage:n("profile_image"),bio:n("bio"),agencyId:a("agency_id").references(()=>X.id,{onDelete:"set null"}),licenseNumber:n("license_number"),licenseState:n("license_state"),licenseExpiry:k("license_expiry"),licenseVerified:N("license_verified").default(!1),specialties:f("specialties").$type(),yearsExperience:I("years_experience"),totalSales:I("total_sales").default(0),rating:w("rating",{precision:3,scale:2}),reviewCount:I("review_count").default(0),location:n("location"),isManagedProfile:N("is_managed_profile").default(!1),managedBy:a("managed_by"),displayEmail:n("display_email"),displayPhone:n("display_phone"),twoFactorEnabled:N("two_factor_enabled").default(!1),twoFactorSecret:n("two_factor_secret"),twoFactorBackupCodes:f("two_factor_backup_codes").$type(),lastLoginAt:s("last_login_at"),failedLoginAttempts:I("failed_login_attempts").default(0),lockedUntil:s("locked_until"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow(),deletedAt:s("deleted_at")}),F=y("properties",{id:a("id").primaryKey().default(m`gen_random_uuid()`),ownerId:a("owner_id").references(()=>c.id,{onDelete:"cascade"}),listingAgentId:a("listing_agent_id").references(()=>c.id,{onDelete:"set null"}),agencyId:a("agency_id").references(()=>X.id,{onDelete:"set null"}),title:n("title").notNull(),description:n("description"),address:n("address").notNull(),city:n("city"),state:n("state"),zipCode:n("zip_code"),price:w("price",{precision:12,scale:2}),bedrooms:I("bedrooms"),bathrooms:w("bathrooms",{precision:3,scale:1}),squareFeet:I("square_feet"),propertyType:n("property_type"),amenities:f("amenities"),images:f("images"),latitude:w("latitude",{precision:10,scale:8}),longitude:w("longitude",{precision:11,scale:8}),furnished:N("furnished").default(!1),petsAllowed:N("pets_allowed").default(!1),leaseTerm:n("lease_term"),utilitiesIncluded:f("utilities_included"),status:n("status").default("active"),listingStatus:n("listing_status").default("draft"),visibility:n("visibility").default("public"),expiresAt:s("expires_at"),autoUnpublish:N("auto_unpublish").default(!0),expirationDays:I("expiration_days").default(90),priceHistory:f("price_history").$type(),viewCount:I("view_count").default(0),saveCount:I("save_count").default(0),applicationCount:I("application_count").default(0),listedAt:s("listed_at"),soldAt:s("sold_at"),soldPrice:w("sold_price",{precision:12,scale:2}),scheduledPublishAt:s("scheduled_publish_at"),addressVerified:N("address_verified").default(!1),applicationFee:w("application_fee",{precision:8,scale:2}).default("45.00"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow(),deletedAt:s("deleted_at")}),Hn=y("property_questions",{id:a("id").primaryKey().default(m`gen_random_uuid()`),propertyId:a("property_id").references(()=>F.id,{onDelete:"cascade"}),question:n("question").notNull(),questionType:n("question_type").default("text"),options:f("options").$type(),required:N("required").default(!1),displayOrder:I("display_order").default(0),isActive:N("is_active").default(!0),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()}),Wn=y("property_notes",{id:a("id").primaryKey().default(m`gen_random_uuid()`),propertyId:a("property_id").references(()=>F.id,{onDelete:"cascade"}),userId:a("user_id").references(()=>c.id,{onDelete:"cascade"}),content:n("content").notNull(),noteType:n("note_type").default("general"),isPinned:N("is_pinned").default(!1),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()}),Yn=["lease_preparation","lease_sent","lease_accepted","lease_declined","move_in_ready","completed"],M=y("applications",{id:a("id").primaryKey().default(m`gen_random_uuid()`),propertyId:a("property_id").references(()=>F.id,{onDelete:"cascade"}),userId:a("user_id").references(()=>c.id,{onDelete:"cascade"}),step:I("step").default(0),personalInfo:f("personal_info"),rentalHistory:f("rental_history"),employment:f("employment"),references:f("references"),disclosures:f("disclosures"),documents:f("documents"),status:n("status").default("draft"),previousStatus:n("previous_status"),statusHistory:f("status_history").$type(),reviewedBy:a("reviewed_by").references(()=>c.id),reviewedAt:s("reviewed_at"),score:I("score"),scoreBreakdown:f("score_breakdown").$type(),scoredAt:s("scored_at"),rejectionCategory:n("rejection_category"),rejectionReason:n("rejection_reason"),rejectionDetails:f("rejection_details").$type(),requiredDocuments:f("required_documents").$type(),documentStatus:f("document_status").$type(),expiresAt:s("expires_at"),expiredAt:s("expired_at"),applicationFee:w("application_fee",{precision:8,scale:2}),paymentStatus:n("payment_status").default("pending"),paymentAttempts:f("payment_attempts").$type(),paymentPaidAt:s("payment_paid_at"),manualPaymentVerified:N("manual_payment_verified").default(!1),manualPaymentVerifiedAt:s("manual_payment_verified_at"),manualPaymentVerifiedBy:a("manual_payment_verified_by").references(()=>c.id),manualPaymentAmount:w("manual_payment_amount",{precision:8,scale:2}),manualPaymentMethod:n("manual_payment_method"),manualPaymentReceivedAt:s("manual_payment_received_at"),manualPaymentNote:n("manual_payment_note"),manualPaymentReferenceId:n("manual_payment_reference_id"),infoRequestedReason:n("info_requested_reason"),infoRequestedAt:s("info_requested_at"),infoRequestedBy:a("info_requested_by").references(()=>c.id),infoRequestedDueDate:s("info_requested_due_date"),conditionalApprovalReason:n("conditional_approval_reason"),conditionalApprovalAt:s("conditional_approval_at"),conditionalApprovalBy:a("conditional_approval_by").references(()=>c.id),conditionalApprovalDueDate:s("conditional_approval_due_date"),conditionalRequirements:f("conditional_requirements").$type(),conditionalDocumentsRequired:f("conditional_documents_required").$type(),conditionalDocumentsUploaded:f("conditional_documents_uploaded").$type(),leaseStatus:n("lease_status").default("lease_preparation"),leaseVersion:I("lease_version").default(1),leaseDocumentUrl:n("lease_document_url"),leaseDocumentId:a("lease_document_id"),leaseTemplateId:a("lease_template_id"),leaseGeneratedAt:s("lease_generated_at"),leaseSentAt:s("lease_sent_at"),leaseSentBy:a("lease_sent_by").references(()=>c.id),leaseAcceptedAt:s("lease_accepted_at"),leaseDeclineReason:n("lease_decline_reason"),leaseSignedAt:s("lease_signed_at"),moveInDate:s("move_in_date"),moveInScheduledAt:s("move_in_scheduled_at"),moveInInstructions:f("move_in_instructions").$type(),customAnswers:f("custom_answers").$type(),conversationId:a("conversation_id"),lastSavedStep:I("last_saved_step").default(0),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow(),deletedAt:s("deleted_at")},t=>({userPropertyUnique:K().on(t.userId,t.propertyId)})),kn=y("co_applicants",{id:a("id").primaryKey().default(m`gen_random_uuid()`),applicationId:a("application_id").references(()=>M.id,{onDelete:"cascade"}),email:n("email").notNull(),fullName:n("full_name").notNull(),phone:n("phone"),relationship:n("relationship"),personalInfo:f("personal_info"),employment:f("employment"),income:w("income",{precision:12,scale:2}),status:n("status").default("pending"),invitedAt:s("invited_at").defaultNow(),respondedAt:s("responded_at"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()}),ea=y("application_comments",{id:a("id").primaryKey().default(m`gen_random_uuid()`),applicationId:a("application_id").references(()=>M.id,{onDelete:"cascade"}),userId:a("user_id").references(()=>c.id,{onDelete:"cascade"}),comment:n("comment").notNull(),commentType:n("comment_type").default("note"),isInternal:N("is_internal").default(!0),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()}),ta=y("application_notifications",{id:a("id").primaryKey().default(m`gen_random_uuid()`),applicationId:a("application_id").references(()=>M.id,{onDelete:"cascade"}),userId:a("user_id").references(()=>c.id,{onDelete:"cascade"}),notificationType:n("notification_type").notNull(),channel:n("channel").default("email"),subject:n("subject"),content:n("content"),sentAt:s("sent_at"),readAt:s("read_at"),status:n("status").default("pending"),createdAt:s("created_at").defaultNow()}),ra=y("user_notification_preferences",{id:a("id").primaryKey().default(m`gen_random_uuid()`),userId:a("user_id").notNull().unique().references(()=>c.id,{onDelete:"cascade"}),emailNewApplications:N("email_new_applications").default(!0),emailStatusUpdates:N("email_status_updates").default(!0),emailPropertySaved:N("email_property_saved").default(!0),emailLeaseReminders:N("email_lease_reminders").default(!0),inAppNotifications:N("in_app_notifications").default(!0),pushNotifications:N("push_notifications").default(!1),notificationFrequency:n("notification_frequency").default("instant"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()}),ia=y("property_notifications",{id:a("id").primaryKey().default(m`gen_random_uuid()`),userId:a("user_id").references(()=>c.id,{onDelete:"cascade"}),propertyId:a("property_id").references(()=>F.id,{onDelete:"cascade"}),notificationType:n("notification_type").notNull(),channel:n("channel").default("email"),subject:n("subject"),content:n("content"),sentAt:s("sent_at"),readAt:s("read_at"),status:n("status").default("pending"),createdAt:s("created_at").defaultNow()},t=>({userPropertyUnique:K().on(t.userId,t.propertyId)})),na=y("inquiries",{id:a("id").primaryKey().default(m`gen_random_uuid()`),agentId:a("agent_id").references(()=>c.id,{onDelete:"cascade"}),propertyId:a("property_id").references(()=>F.id,{onDelete:"cascade"}),senderName:n("sender_name").notNull(),senderEmail:n("sender_email").notNull(),senderPhone:n("sender_phone"),message:n("message"),inquiryType:n("inquiry_type"),status:n("status").default("pending"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow(),deletedAt:s("deleted_at")}),aa=y("requirements",{id:a("id").primaryKey().default(m`gen_random_uuid()`),userId:a("user_id").references(()=>c.id,{onDelete:"cascade"}),contactName:n("contact_name").notNull(),contactEmail:n("contact_email").notNull(),contactPhone:n("contact_phone"),budgetMin:w("budget_min",{precision:10,scale:2}),budgetMax:w("budget_max",{precision:10,scale:2}),bedrooms:I("bedrooms"),bathrooms:w("bathrooms",{precision:3,scale:1}),propertyType:f("property_type"),locations:f("locations"),amenities:f("amenities"),pets:f("pets"),leaseTerm:n("lease_term"),moveInDate:k("move_in_date"),additionalNotes:n("additional_notes"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()}),Ee=y("reviews",{id:a("id").primaryKey().default(m`gen_random_uuid()`),propertyId:a("property_id").references(()=>F.id,{onDelete:"cascade"}),userId:a("user_id").references(()=>c.id,{onDelete:"cascade"}),rating:I("rating"),title:n("title"),comment:n("comment"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow(),deletedAt:s("deleted_at")},t=>({userPropertyUnique:K().on(t.userId,t.propertyId)})),sa=y("favorites",{id:a("id").primaryKey().default(m`gen_random_uuid()`),userId:a("user_id").references(()=>c.id,{onDelete:"cascade"}),propertyId:a("property_id").references(()=>F.id,{onDelete:"cascade"}),createdAt:s("created_at").defaultNow()},t=>({userPropertyUnique:K().on(t.userId,t.propertyId)})),oa=y("saved_searches",{id:a("id").primaryKey().default(m`gen_random_uuid()`),userId:a("user_id").references(()=>c.id,{onDelete:"cascade"}),name:n("name").notNull(),filters:f("filters").notNull(),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()}),da=y("newsletter_subscribers",{id:a("id").primaryKey().default(m`gen_random_uuid()`),email:n("email").notNull().unique(),subscribedAt:s("subscribed_at").defaultNow()}),ua=y("contact_messages",{id:a("id").primaryKey().default(m`gen_random_uuid()`),name:n("name").notNull(),email:n("email").notNull(),subject:n("subject"),message:n("message").notNull(),read:N("read").default(!1),createdAt:s("created_at").defaultNow()}),la=y("admin_settings",{id:a("id").primaryKey().default(m`gen_random_uuid()`),key:n("key").notNull().unique(),value:n("value"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()});y("image_audit_logs",{id:a("id").primaryKey().default(m`gen_random_uuid()`),actorId:a("actor_id").references(()=>c.id,{onDelete:"set null"}),actorRole:n("actor_role").notNull(),action:n("action").notNull(),photoId:a("photo_id"),propertyId:a("property_id"),metadata:f("metadata").$type(),timestamp:s("timestamp").defaultNow(),createdAt:s("created_at").defaultNow()});const ca=y("payment_verifications",{id:a("id").primaryKey().default(m`gen_random_uuid()`),applicationId:a("application_id").references(()=>M.id,{onDelete:"cascade"}),verifiedBy:a("verified_by").references(()=>c.id,{onDelete:"set null"}),amount:w("amount",{precision:8,scale:2}).notNull(),paymentMethod:n("payment_method").notNull(),receivedAt:s("received_at").notNull(),referenceId:n("reference_id").notNull(),internalNote:n("internal_note"),confirmationChecked:N("confirmation_checked").default(!1),previousPaymentStatus:n("previous_payment_status"),createdAt:s("created_at").defaultNow()});h(ca).omit({id:!0,createdAt:!0});const pa=y("audit_logs",{id:a("id").primaryKey().default(m`gen_random_uuid()`),userId:a("user_id").references(()=>c.id,{onDelete:"set null"}),action:n("action").notNull(),resourceType:n("resource_type").notNull(),resourceId:a("resource_id"),previousData:f("previous_data"),newData:f("new_data"),ipAddress:n("ip_address"),userAgent:n("user_agent"),metadata:f("metadata").$type(),createdAt:s("created_at").defaultNow()}),ma=y("sensitive_data",{id:a("id").primaryKey().default(m`gen_random_uuid()`),userId:a("user_id").references(()=>c.id,{onDelete:"cascade"}),applicationId:a("application_id").references(()=>M.id,{onDelete:"cascade"}),dataType:n("data_type").notNull(),encryptedValue:n("encrypted_value").notNull(),encryptionKeyId:n("encryption_key_id"),accessedBy:f("accessed_by").$type(),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()}),$e=y("uploaded_files",{id:a("id").primaryKey().default(m`gen_random_uuid()`),userId:a("user_id").references(()=>c.id,{onDelete:"cascade"}),applicationId:a("application_id").references(()=>M.id,{onDelete:"cascade"}),filename:n("filename").notNull(),originalName:n("original_name").notNull(),mimeType:n("mime_type").notNull(),fileSize:I("file_size").notNull(),storagePath:n("storage_path").notNull(),checksum:n("checksum"),isVerified:N("is_verified").default(!1),verifiedBy:a("verified_by").references(()=>c.id),verifiedAt:s("verified_at"),createdAt:s("created_at").defaultNow()});h(la).omit({id:!0,createdAt:!0,updatedAt:!0});h(pa).omit({id:!0,createdAt:!0});h(ma).omit({id:!0,createdAt:!0,updatedAt:!0});h($e).omit({id:!0,createdAt:!0,isVerified:!0,verifiedBy:!0,verifiedAt:!0});const je=y("transactions",{id:a("id").primaryKey().default(m`gen_random_uuid()`),propertyId:a("property_id").references(()=>F.id,{onDelete:"set null"}),agentId:a("agent_id").references(()=>c.id,{onDelete:"set null"}),agencyId:a("agency_id").references(()=>X.id,{onDelete:"set null"}),buyerId:a("buyer_id").references(()=>c.id,{onDelete:"set null"}),applicationId:a("application_id").references(()=>M.id,{onDelete:"set null"}),transactionType:n("transaction_type").default("lease"),transactionAmount:w("transaction_amount",{precision:12,scale:2}),commissionRate:w("commission_rate",{precision:5,scale:2}),commissionAmount:w("commission_amount",{precision:12,scale:2}),agentSplit:w("agent_split",{precision:5,scale:2}),agentCommission:w("agent_commission",{precision:12,scale:2}),agencyCommission:w("agency_commission",{precision:12,scale:2}),status:n("status").default("pending"),closedAt:s("closed_at"),notes:n("notes"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()}),fa=y("agent_reviews",{id:a("id").primaryKey().default(m`gen_random_uuid()`),agentId:a("agent_id").references(()=>c.id,{onDelete:"cascade"}),reviewerId:a("reviewer_id").references(()=>c.id,{onDelete:"cascade"}),transactionId:a("transaction_id").references(()=>je.id,{onDelete:"set null"}),rating:I("rating").notNull(),title:n("title"),comment:n("comment"),wouldRecommend:N("would_recommend").default(!0),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()},t=>({reviewerAgentUnique:K().on(t.reviewerId,t.agentId)})),le=y("conversations",{id:a("id").primaryKey().default(m`gen_random_uuid()`),propertyId:a("property_id").references(()=>F.id,{onDelete:"set null"}),applicationId:a("application_id").references(()=>M.id,{onDelete:"set null"}),subject:n("subject"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()}),ga=y("conversation_participants",{id:a("id").primaryKey().default(m`gen_random_uuid()`),conversationId:a("conversation_id").references(()=>le.id,{onDelete:"cascade"}),userId:a("user_id").references(()=>c.id,{onDelete:"cascade"}),lastReadAt:s("last_read_at"),createdAt:s("created_at").defaultNow()},t=>({conversationUserUnique:K().on(t.conversationId,t.userId)})),ya=y("messages",{id:a("id").primaryKey().default(m`gen_random_uuid()`),conversationId:a("conversation_id").references(()=>le.id,{onDelete:"cascade"}),senderId:a("sender_id").references(()=>c.id,{onDelete:"cascade"}),content:n("content").notNull(),messageType:n("message_type").default("text"),attachments:f("attachments").$type(),readAt:s("read_at"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()});h(X).omit({id:!0,createdAt:!0,updatedAt:!0,deletedAt:!0});h(c).omit({id:!0,createdAt:!0,updatedAt:!0,deletedAt:!0});h(F,{price:U.string(),bedrooms:U.number(),bathrooms:U.string(),squareFeet:U.number().optional(),latitude:U.string().optional(),longitude:U.string().optional()}).omit({id:!0,createdAt:!0,updatedAt:!0,deletedAt:!0});h(Wn).omit({id:!0,createdAt:!0,updatedAt:!0});h(Hn).omit({id:!0,createdAt:!0,updatedAt:!0});h(M).omit({id:!0,createdAt:!0,updatedAt:!0,deletedAt:!0,reviewedBy:!0,reviewedAt:!0,score:!0,scoreBreakdown:!0,scoredAt:!0,rejectionCategory:!0,rejectionReason:!0,rejectionDetails:!0,expiredAt:!0,statusHistory:!0,previousStatus:!0});h(kn).omit({id:!0,createdAt:!0,updatedAt:!0,invitedAt:!0,respondedAt:!0});h(ea).omit({id:!0,createdAt:!0,updatedAt:!0});h(ta).omit({id:!0,createdAt:!0,sentAt:!0,readAt:!0});h(ra).omit({id:!0,createdAt:!0,updatedAt:!0});h(ia).omit({id:!0,createdAt:!0,sentAt:!0,readAt:!0});h(na).omit({id:!0,createdAt:!0,updatedAt:!0,deletedAt:!0});h(aa).omit({id:!0,createdAt:!0,updatedAt:!0});h(Ee).omit({id:!0,createdAt:!0,updatedAt:!0,deletedAt:!0});h(sa).omit({id:!0,createdAt:!0});h(oa).omit({id:!0,createdAt:!0,updatedAt:!0});h(da).omit({id:!0,subscribedAt:!0});h(ua).omit({id:!0,createdAt:!0,read:!0});h(je).omit({id:!0,createdAt:!0,updatedAt:!0,closedAt:!0});h(fa).omit({id:!0,createdAt:!0,updatedAt:!0});h(le).omit({id:!0,createdAt:!0,updatedAt:!0});h(ga).omit({id:!0,createdAt:!0,lastReadAt:!0});h(ya).omit({id:!0,createdAt:!0,updatedAt:!0,readAt:!0});B({leaseStatus:W([...Yn]),leaseDocumentUrl:g().url().optional(),leaseVersion:O().int().positive().optional(),moveInDate:g().datetime().optional(),notes:g().optional()});const Da=B({email:g().email("Invalid email address"),password:g().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[0-9]/,"Password must contain at least one number"),fullName:g().min(1,"Full name is required"),phone:g().regex(/^[\+]?[(]?[0-9]{1,4}[)]?[-\s\.]?[(]?[0-9]{1,4}[)]?[-\s\.]?[0-9]{1,9}$/,"Please enter a valid phone number").optional().or(Ae("")),role:W(["renter","buyer","landlord","property_manager","agent"]).optional().default("renter")}),va=B({email:g().email("Invalid email address"),password:g().min(1,"Password is required")}),_a=y("content_reports",{id:a("id").primaryKey().default(m`gen_random_uuid()`),reporterId:a("reporter_id").references(()=>c.id,{onDelete:"set null"}),propertyId:a("property_id").references(()=>F.id,{onDelete:"cascade"}),reviewId:a("review_id").references(()=>Ee.id,{onDelete:"cascade"}),reportType:n("report_type").notNull(),description:n("description"),status:n("status").default("pending"),priority:n("priority").default("normal"),assignedTo:a("assigned_to").references(()=>c.id,{onDelete:"set null"}),resolution:n("resolution"),resolvedBy:a("resolved_by").references(()=>c.id,{onDelete:"set null"}),resolvedAt:s("resolved_at"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()}),Qe=y("disputes",{id:a("id").primaryKey().default(m`gen_random_uuid()`),initiatorId:a("initiator_id").references(()=>c.id,{onDelete:"set null"}),respondentId:a("respondent_id").references(()=>c.id,{onDelete:"set null"}),propertyId:a("property_id").references(()=>F.id,{onDelete:"set null"}),applicationId:a("application_id").references(()=>M.id,{onDelete:"set null"}),disputeType:n("dispute_type").notNull(),subject:n("subject").notNull(),description:n("description").notNull(),status:n("status").default("open"),priority:n("priority").default("normal"),assignedTo:a("assigned_to").references(()=>c.id,{onDelete:"set null"}),resolution:n("resolution"),resolvedBy:a("resolved_by").references(()=>c.id,{onDelete:"set null"}),resolvedAt:s("resolved_at"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()}),ha=y("dispute_messages",{id:a("id").primaryKey().default(m`gen_random_uuid()`),disputeId:a("dispute_id").references(()=>Qe.id,{onDelete:"cascade"}),senderId:a("sender_id").references(()=>c.id,{onDelete:"set null"}),message:n("message").notNull(),isInternal:N("is_internal").default(!1),attachments:f("attachments").$type(),createdAt:s("created_at").defaultNow()}),ba=y("document_verifications",{id:a("id").primaryKey().default(m`gen_random_uuid()`),userId:a("user_id").references(()=>c.id,{onDelete:"cascade"}),applicationId:a("application_id").references(()=>M.id,{onDelete:"cascade"}),fileId:a("file_id").references(()=>$e.id,{onDelete:"cascade"}),documentType:n("document_type").notNull(),status:n("status").default("pending"),verifiedBy:a("verified_by").references(()=>c.id,{onDelete:"set null"}),verifiedAt:s("verified_at"),rejectionReason:n("rejection_reason"),expiresAt:s("expires_at"),notes:n("notes"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()});h(_a).omit({id:!0,createdAt:!0,updatedAt:!0,resolvedBy:!0,resolvedAt:!0});h(Qe).omit({id:!0,createdAt:!0,updatedAt:!0,resolvedBy:!0,resolvedAt:!0});h(ha).omit({id:!0,createdAt:!0});h(ba).omit({id:!0,createdAt:!0,updatedAt:!0,verifiedBy:!0,verifiedAt:!0});const Na=y("push_subscriptions",{id:a("id").primaryKey().default(m`gen_random_uuid()`),userId:a("user_id").references(()=>c.id,{onDelete:"cascade"}),endpoint:n("endpoint").notNull(),p256dh:n("p256dh").notNull(),auth:n("auth").notNull(),userAgent:n("user_agent"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()});h(Na).omit({id:!0,createdAt:!0,updatedAt:!0});const Ke=y("leases",{id:a("id").primaryKey().default(m`gen_random_uuid()`),applicationId:a("application_id").references(()=>M.id,{onDelete:"cascade"}),propertyId:a("property_id").references(()=>F.id,{onDelete:"cascade"}),tenantId:a("tenant_id").references(()=>c.id,{onDelete:"cascade"}),landlordId:a("landlord_id").references(()=>c.id,{onDelete:"cascade"}),monthlyRent:w("monthly_rent",{precision:12,scale:2}).notNull(),securityDepositAmount:w("security_deposit_amount",{precision:12,scale:2}).notNull(),rentDueDay:I("rent_due_day").default(1).notNull(),leaseStartDate:s("lease_start_date").notNull(),leaseEndDate:s("lease_end_date").notNull(),status:n("status").default("active"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()}),Aa=y("payments",{id:a("id").primaryKey().default(m`gen_random_uuid()`),leaseId:a("lease_id").references(()=>Ke.id,{onDelete:"cascade"}).notNull(),tenantId:a("tenant_id").references(()=>c.id,{onDelete:"cascade"}).notNull(),amount:w("amount",{precision:12,scale:2}).notNull(),type:n("type").notNull(),status:n("status").default("pending"),dueDate:s("due_date").notNull(),paidAt:s("paid_at"),referenceId:n("reference_id"),verifiedBy:a("verified_by").references(()=>c.id,{onDelete:"set null"}),verifiedAt:s("verified_at"),notes:n("notes"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()});h(Ke).omit({id:!0,createdAt:!0,updatedAt:!0});h(Aa).omit({id:!0,createdAt:!0,updatedAt:!0,paidAt:!0,verifiedBy:!0,verifiedAt:!0});const Oe=y("lease_templates",{id:a("id").primaryKey().default(m`gen_random_uuid()`),userId:a("user_id").references(()=>c.id,{onDelete:"cascade"}),agencyId:a("agency_id").references(()=>X.id,{onDelete:"set null"}),name:n("name").notNull(),description:n("description"),state:n("state"),rentAmount:w("rent_amount",{precision:12,scale:2}),securityDeposit:w("security_deposit",{precision:12,scale:2}),leaseTermMonths:I("lease_term_months"),content:n("content").notNull(),customClauses:f("custom_clauses").$type(),isDefault:N("is_default").default(!1),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()}),Pa=y("lease_drafts",{id:a("id").primaryKey().default(m`gen_random_uuid()`),applicationId:a("application_id").references(()=>M.id,{onDelete:"cascade"}),templateId:a("template_id").references(()=>Oe.id,{onDelete:"set null"}),createdBy:a("created_by").references(()=>c.id,{onDelete:"cascade"}),version:I("version").default(1),status:n("status").default("draft"),rentAmount:w("rent_amount",{precision:12,scale:2}).notNull(),securityDeposit:w("security_deposit",{precision:12,scale:2}),leaseStartDate:s("lease_start_date").notNull(),leaseEndDate:s("lease_end_date").notNull(),content:n("content").notNull(),customClauses:f("custom_clauses").$type(),changes:f("changes").$type(),signatureEnabled:N("signature_enabled").default(!1),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()}),wa=y("lease_signatures",{id:a("id").primaryKey().default(m`gen_random_uuid()`),applicationId:a("application_id").references(()=>M.id,{onDelete:"cascade"}),signerId:a("signer_id").references(()=>c.id,{onDelete:"cascade"}),signerRole:n("signer_role").notNull(),signatureData:n("signature_data").notNull(),documentHash:n("document_hash"),signedAt:s("signed_at").defaultNow(),createdAt:s("created_at").defaultNow()}),Sa=y("property_templates",{id:a("id").primaryKey().default(m`gen_random_uuid()`),userId:a("user_id").references(()=>c.id,{onDelete:"cascade"}),name:n("name").notNull(),description:n("description"),propertyType:n("property_type"),bedrooms:I("bedrooms"),bathrooms:w("bathrooms",{precision:3,scale:1}),squareFeet:I("square_feet"),amenities:f("amenities").$type(),furnished:N("furnished").default(!1),petsAllowed:N("pets_allowed").default(!1),leaseTerm:n("lease_term"),utilitiesIncluded:f("utilities_included").$type(),defaultPrice:w("default_price",{precision:12,scale:2}),isDefault:N("is_default").default(!1),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()});h(Sa).omit({id:!0,createdAt:!0,updatedAt:!0});h(Oe).omit({id:!0,createdAt:!0,updatedAt:!0});h(Pa).omit({id:!0,createdAt:!0,updatedAt:!0,version:!0,changes:!0,status:!0});B({rentAmount:O().positive().optional(),securityDeposit:O().nonnegative().optional(),leaseStartDate:g().datetime().optional(),leaseEndDate:g().datetime().optional(),content:g().optional(),customClauses:Z(B({id:g(),title:g(),content:g(),optional:E(),included:E().optional()})).optional(),status:W(["draft","ready_to_send","sent"]).optional(),changeDescription:g().optional()});h(wa).omit({id:!0,createdAt:!0,signedAt:!0});B({changeDescription:g().default("Lease sent to tenant")});B({moveInDate:g().datetime().optional()});B({reason:g().min(1,"Decline reason is required").optional()});B({signatureEnabled:E()});B({signatureData:g().min(1,"Signature data is required"),documentHash:g().optional()});B({signatureData:g().min(1,"Signature data is required"),documentHash:g().optional()});B({moveInDate:g().datetime().optional(),keyPickup:B({location:g().min(1,"Key pickup location required"),time:g().min(1,"Key pickup time required"),notes:g().optional()}).optional(),accessDetails:B({gateCode:g().optional(),keypadCode:g().optional(),smartLockCode:g().optional(),notes:g().optional()}).optional(),utilityNotes:B({electricity:g().optional(),water:g().optional(),gas:g().optional(),internet:g().optional(),other:g().optional()}).optional(),checklistItems:Z(B({id:g(),item:g(),completed:E().optional()})).optional()});B({checklistItems:Z(B({id:g(),completed:E()})).min(1)});B({address:g().min(1,"Address is required"),city:g().optional(),state:g().optional(),zipCode:g().optional()});B({scheduledPublishAt:g().datetime().optional().nullable()});const Ia=y("property_manager_assignments",{id:a("id").primaryKey().default(m`gen_random_uuid()`),propertyId:a("property_id").references(()=>F.id,{onDelete:"cascade"}).notNull(),propertyManagerId:a("property_manager_id").references(()=>c.id,{onDelete:"cascade"}).notNull(),assignedBy:a("assigned_by").references(()=>c.id,{onDelete:"set null"}),permissions:f("permissions").$type().default(m`'["view_properties", "manage_applications", "manage_leases", "manage_payments", "manage_maintenance", "messaging_access"]'::jsonb`),assignedAt:s("assigned_at").defaultNow(),revokedAt:s("revoked_at"),notes:n("notes"),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()});h(Ia).omit({id:!0,assignedAt:!0,createdAt:!0,updatedAt:!0,revokedAt:!0});const Re=y("photos",{id:a("id").primaryKey().default(m`gen_random_uuid()`),imageKitFileId:n("imagekit_file_id").notNull(),url:n("url").notNull(),thumbnailUrl:n("thumbnail_url"),category:n("category").notNull().$type(),uploaderId:a("uploader_id").references(()=>c.id,{onDelete:"cascade"}).notNull(),propertyId:a("property_id").references(()=>F.id,{onDelete:"cascade"}),maintenanceRequestId:a("maintenance_request_id"),isPrivate:N("is_private").default(!1),orderIndex:I("order_index").default(0),archived:N("archived").default(!1),archivedAt:s("archived_at"),replacedWithId:a("replaced_with_id").references(()=>Re.id,{onDelete:"set null"}),metadata:f("metadata").$type(),fileSizeBytes:I("file_size_bytes").default(0),viewCount:I("view_count").default(0),createdAt:s("created_at").defaultNow(),updatedAt:s("updated_at").defaultNow()});h(Re).omit({id:!0,createdAt:!0,updatedAt:!0});export{va as l,Da as s};
